<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css">
        <link rel="stylesheet" href="/index.c5640123.css">
    </head>
    <body class="center mt5 pa2" style="max-width:60em">
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <h1 class="f1 lh-title tc">Stories</h1> 

        <form class="pa4 black-80">
            <div class="measure center">
            <label for="tags" class="f6 b db mb2">Tags <span class="normal black-60">(optional)</span></label>
            <input id="tags" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="text" aria-describedby="tags-desc">
            <small id="tags-desc" class="f6 black-60 db mb2">Tags to use for filtering. Hit Esc to clear.</small>
            </div>
        </form>

        <div x-cloak="" x-data="storyData" class="flex flex-wrap justify-around">
            <template x-for="story in stories" @tagchange.document="handleTagChange">
                <article class="hidden ba mv4 ma2 w-40-ns w-100">
                    <h1 class="f4 bg-near-black white mv0 pv2 ph3">
                        <a class="link white dim" :href="story.Link" x-text="story.Title"></a>
                    </h1>
                    <div class="pa3 bt">
                    <p class="f6 f5-ns lh-copy measure mv0" x-html="story.Summary.replaceAll('\n', '<br/>')"></p>
                    </div>
                    <div class="pa3">
                        <template x-for="tag in story.Tags">
                            <a class="bg-light-blue white pa2 ma1 dib link dim" x-text="tag" href="#" @click="addTag(tag)"></a>
                        </template>
                    </div>
                </article>
            </template>
        </div>
        
        <script>!function(){function t(t){return t&&t.__esModule?t.default:t}var e,i,s,n,a=!1,r=!1,o=[];function l(t){!function(t){o.includes(t)||o.push(t);r||a||(a=!0,queueMicrotask(u))}(t)}function d(t){let e=o.indexOf(t);-1!==e&&o.splice(e,1)}function u(){a=!1,r=!0;for(let t=0;t<o.length;t++)o[t]();o.length=0,r=!1}var c=!0;function h(t){i=t}var p=[],g=[],f=[];function m(t,e){"function"==typeof e?(t._x_cleanups||(t._x_cleanups=[]),t._x_cleanups.push(e)):(e=t,g.push(e))}function v(t,e){t._x_attributeCleanups&&Object.entries(t._x_attributeCleanups).forEach((([i,s])=>{(void 0===e||e.includes(i))&&(s.forEach((t=>t())),delete t._x_attributeCleanups[i])}))}var _=new MutationObserver(S),y=!1;function w(){_.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),y=!0}function b(){(x=x.concat(_.takeRecords())).length&&!T&&(T=!0,queueMicrotask((()=>{S(x),x.length=0,T=!1}))),_.disconnect(),y=!1}var x=[],T=!1;function E(t){if(!y)return t();b();let e=t();return w(),e}var O=!1,k=[];function S(t){if(O)return void(k=k.concat(t));let e=[],i=[],s=new Map,n=new Map;for(let a=0;a<t.length;a++)if(!t[a].target._x_ignoreMutationObserver&&("childList"===t[a].type&&(t[a].addedNodes.forEach((t=>1===t.nodeType&&e.push(t))),t[a].removedNodes.forEach((t=>1===t.nodeType&&i.push(t)))),"attributes"===t[a].type)){let e=t[a].target,i=t[a].attributeName,r=t[a].oldValue,o=()=>{s.has(e)||s.set(e,[]),s.get(e).push({name:i,value:e.getAttribute(i)})},l=()=>{n.has(e)||n.set(e,[]),n.get(e).push(i)};e.hasAttribute(i)&&null===r?o():e.hasAttribute(i)?(l(),o()):l()}n.forEach(((t,e)=>{v(e,t)})),s.forEach(((t,e)=>{p.forEach((i=>i(e,t)))}));for(let t of i)if(!e.includes(t)&&(g.forEach((e=>e(t))),t._x_cleanups))for(;t._x_cleanups.length;)t._x_cleanups.pop()();e.forEach((t=>{t._x_ignoreSelf=!0,t._x_ignore=!0}));for(let t of e)i.includes(t)||t.isConnected&&(delete t._x_ignoreSelf,delete t._x_ignore,f.forEach((e=>e(t))),t._x_ignore=!0,t._x_ignoreSelf=!0);e.forEach((t=>{delete t._x_ignoreSelf,delete t._x_ignore})),e=null,i=null,s=null,n=null}function C(t){return I(A(t))}function D(t,e,i){return t._x_dataStack=[e,...A(i||t)],()=>{t._x_dataStack=t._x_dataStack.filter((t=>t!==e))}}function M(t,e){let i=t._x_dataStack[0];Object.entries(e).forEach((([t,e])=>{i[t]=e}))}function A(t){return t._x_dataStack?t._x_dataStack:"function"==typeof ShadowRoot&&t instanceof ShadowRoot?A(t.host):t.parentNode?A(t.parentNode):[]}function I(t){let e=new Proxy({},{ownKeys:()=>Array.from(new Set(t.flatMap((t=>Object.keys(t))))),has:(e,i)=>t.some((t=>t.hasOwnProperty(i))),get:(i,s)=>(t.find((t=>{if(t.hasOwnProperty(s)){let i=Object.getOwnPropertyDescriptor(t,s);if(i.get&&i.get._x_alreadyBound||i.set&&i.set._x_alreadyBound)return!0;if((i.get||i.set)&&i.enumerable){let n=i.get,a=i.set,r=i;n=n&&n.bind(e),a=a&&a.bind(e),n&&(n._x_alreadyBound=!0),a&&(a._x_alreadyBound=!0),Object.defineProperty(t,s,{...r,get:n,set:a})}return!0}return!1}))||{})[s],set:(e,i,s)=>{let n=t.find((t=>t.hasOwnProperty(i)));return n?n[i]=s:t[t.length-1][i]=s,!0}});return e}function N(t){let e=(i,s="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach((([n,{value:a,enumerable:r}])=>{if(!1===r||void 0===a)return;let o=""===s?n:`${s}.${n}`;var l;"object"==typeof a&&null!==a&&a._x_interceptor?i[n]=a.initialize(t,o,n):"object"!=typeof(l=a)||Array.isArray(l)||null===l||a===i||a instanceof Element||e(a,o)}))};return e(t)}function L(t,e=(()=>{})){let i={initialValue:void 0,_x_interceptor:!0,initialize(e,i,s){return t(this.initialValue,(()=>function(t,e){return e.split(".").reduce(((t,e)=>t[e]),t)}(e,i)),(t=>R(e,i,t)),i,s)}};return e(i),t=>{if("object"==typeof t&&null!==t&&t._x_interceptor){let e=i.initialize.bind(i);i.initialize=(s,n,a)=>{let r=t.initialize(s,n,a);return i.initialValue=r,e(s,n,a)}}else i.initialValue=t;return i}}function R(t,e,i){if("string"==typeof e&&(e=e.split(".")),1!==e.length){if(0===e.length)throw error;return t[e[0]]||(t[e[0]]={}),R(t[e[0]],e.slice(1),i)}t[e[0]]=i}var j={};function P(t,e){j[t]=e}function $(t,e){return Object.entries(j).forEach((([i,s])=>{Object.defineProperty(t,`$${i}`,{get(){let[t,i]=et(e);return t={interceptor:L,...t},m(e,i),s(e,t)},enumerable:!1})})),t}function V(t,e,i,...s){try{return i(...s)}catch(i){F(i,t,e)}}function F(t,e,i){Object.assign(t,{el:e,expression:i}),console.warn(`Alpine Expression Error: ${t.message}\n\n${i?'Expression: "'+i+'"\n\n':""}`,e),setTimeout((()=>{throw t}),0)}function B(t,e,i={}){let s;return z(t,e)((t=>s=t),i),s}function z(...t){return H(...t)}var H=W;function W(t,e){let i={};$(i,t);let s=[i,...A(t)];if("function"==typeof e)return function(t,e){return(i=(()=>{}),{scope:s={},params:n=[]}={})=>{U(i,e.apply(I([s,...t]),n))}}(s,e);let n=function(t,e,i){let s=function(t,e){if(q[t])return q[t];let i=Object.getPrototypeOf((async function(){})).constructor,s=/^[\n\s]*if.*\(.*\)/.test(t)||/^(let|const)\s/.test(t)?`(() => { ${t} })()`:t;let n=(()=>{try{return new i(["__self","scope"],`with (scope) { __self.result = ${s} }; __self.finished = true; return __self.result;`)}catch(i){return F(i,e,t),Promise.resolve()}})();return q[t]=n,n}(e,i);return(n=(()=>{}),{scope:a={},params:r=[]}={})=>{s.result=void 0,s.finished=!1;let o=I([a,...t]);if("function"==typeof s){let t=s(s,o).catch((t=>F(t,i,e)));s.finished?(U(n,s.result,o,r,i),s.result=void 0):t.then((t=>{U(n,t,o,r,i)})).catch((t=>F(t,i,e))).finally((()=>s.result=void 0))}}}(s,e,t);return V.bind(null,t,e,n)}var q={};function U(t,e,i,s,n){if("function"==typeof e){let a=e.apply(i,s);a instanceof Promise?a.then((e=>U(t,e,i,s))).catch((t=>F(t,n,e))):t(a)}else t(e)}var K="x-";function J(t=""){return K+t}var X={};function Q(t,e){X[t]=e}function G(t,e,i){let s={},n=Array.from(e).map(st(((t,e)=>s[t]=e))).filter(rt).map(function(t,e){return({name:i,value:s})=>{let n=i.match(ot()),a=i.match(/:([a-zA-Z0-9\-:]+)/),r=i.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],o=e||t[i]||i;return{type:n?n[1]:null,value:a?a[1]:null,modifiers:r.map((t=>t.replace(".",""))),expression:s,original:o}}}(s,i)).sort(ut);return n.map((e=>function(t,e){let i=()=>{},s=X[e.type]||i,[n,a]=et(t);!function(t,e,i){t._x_attributeCleanups||(t._x_attributeCleanups={}),t._x_attributeCleanups[e]||(t._x_attributeCleanups[e]=[]),t._x_attributeCleanups[e].push(i)}(t,e.original,a);let r=()=>{t._x_ignore||t._x_ignoreSelf||(s.inline&&s.inline(t,e,n),s=s.bind(s,t,e,n),Z?Y.get(tt).push(s):s())};return r.runCleanups=a,r}(t,e)))}var Z=!1,Y=new Map,tt=Symbol();function et(t){let e=[],[n,a]=function(t){let e=()=>{};return[n=>{let a=i(n);return t._x_effects||(t._x_effects=new Set,t._x_runEffects=()=>{t._x_effects.forEach((t=>t()))}),t._x_effects.add(a),e=()=>{void 0!==a&&(t._x_effects.delete(a),s(a))},a},()=>{e()}]}(t);e.push(a);return[{Alpine:Ut,effect:n,cleanup:t=>e.push(t),evaluateLater:z.bind(z,t),evaluate:B.bind(B,t)},()=>e.forEach((t=>t()))]}var it=(t,e)=>({name:i,value:s})=>(i.startsWith(t)&&(i=i.replace(t,e)),{name:i,value:s});function st(t=(()=>{})){return({name:e,value:i})=>{let{name:s,value:n}=nt.reduce(((t,e)=>e(t)),{name:e,value:i});return s!==e&&t(s,e),{name:s,value:n}}}var nt=[];function at(t){nt.push(t)}function rt({name:t}){return ot().test(t)}var ot=()=>new RegExp(`^${K}([^:^.]+)\\b`);var lt="DEFAULT",dt=["ignore","ref","data","id","bind","init","for","model","modelable","transition","show","if",lt,"teleport","element"];function ut(t,e){let i=-1===dt.indexOf(t.type)?lt:t.type,s=-1===dt.indexOf(e.type)?lt:e.type;return dt.indexOf(i)-dt.indexOf(s)}function ct(t,e,i={}){t.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:!0,composed:!0,cancelable:!0}))}var ht=[],pt=!1;function gt(t){ht.push(t),queueMicrotask((()=>{pt||setTimeout((()=>{ft()}))}))}function ft(){for(pt=!1;ht.length;)ht.shift()()}function mt(t,e){if("function"==typeof ShadowRoot&&t instanceof ShadowRoot)return void Array.from(t.children).forEach((t=>mt(t,e)));let i=!1;if(e(t,(()=>i=!0)),i)return;let s=t.firstElementChild;for(;s;)mt(s,e),s=s.nextElementSibling}function vt(t,...e){console.warn(`Alpine Warning: ${t}`,...e)}var _t=[],yt=[];function wt(){return _t.map((t=>t()))}function bt(){return _t.concat(yt).map((t=>t()))}function xt(t){_t.push(t)}function Tt(t){yt.push(t)}function Et(t,e=!1){return Ot(t,(t=>{if((e?bt():wt()).some((e=>t.matches(e))))return!0}))}function Ot(t,e){if(t){if(e(t))return t;if(t._x_teleportBack&&(t=t._x_teleportBack),t.parentElement)return Ot(t.parentElement,e)}}function kt(t,e=mt){!function(t){Z=!0;let e=Symbol();tt=e,Y.set(e,[]);let i=()=>{for(;Y.get(e).length;)Y.get(e).shift()();Y.delete(e)};t(i),Z=!1,i()}((()=>{e(t,((t,e)=>{G(t,t.attributes).forEach((t=>t())),t._x_ignore&&e()}))}))}function St(t,e){return Array.isArray(e)?Ct(t,e.join(" ")):"object"==typeof e&&null!==e?function(t,e){let i=t=>t.split(" ").filter(Boolean),s=Object.entries(e).flatMap((([t,e])=>!!e&&i(t))).filter(Boolean),n=Object.entries(e).flatMap((([t,e])=>!e&&i(t))).filter(Boolean),a=[],r=[];return n.forEach((e=>{t.classList.contains(e)&&(t.classList.remove(e),r.push(e))})),s.forEach((e=>{t.classList.contains(e)||(t.classList.add(e),a.push(e))})),()=>{r.forEach((e=>t.classList.add(e))),a.forEach((e=>t.classList.remove(e)))}}(t,e):"function"==typeof e?St(t,e()):Ct(t,e)}function Ct(t,e){return e=!0===e?e="":e||"",i=e.split(" ").filter((e=>!t.classList.contains(e))).filter(Boolean),t.classList.add(...i),()=>{t.classList.remove(...i)};var i}function Dt(t,e){return"object"==typeof e&&null!==e?function(t,e){let i={};return Object.entries(e).forEach((([e,s])=>{i[e]=t.style[e],e.startsWith("--")||(e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),t.style.setProperty(e,s)})),setTimeout((()=>{0===t.style.length&&t.removeAttribute("style")})),()=>{Dt(t,i)}}(t,e):function(t,e){let i=t.getAttribute("style",e);return t.setAttribute("style",e),()=>{t.setAttribute("style",i||"")}}(t,e)}function Mt(t,e=(()=>{})){let i=!1;return function(){i?e.apply(this,arguments):(i=!0,t.apply(this,arguments))}}function At(t,e,i={}){t._x_transition||(t._x_transition={enter:{during:i,start:i,end:i},leave:{during:i,start:i,end:i},in(i=(()=>{}),s=(()=>{})){Nt(t,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,s)},out(i=(()=>{}),s=(()=>{})){Nt(t,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,s)}})}function It(t){let e=t.parentNode;if(e)return e._x_hidePromise?e:It(e)}function Nt(t,e,{during:i,start:s,end:n}={},a=(()=>{}),r=(()=>{})){if(t._x_transitioning&&t._x_transitioning.cancel(),0===Object.keys(i).length&&0===Object.keys(s).length&&0===Object.keys(n).length)return a(),void r();let o,l,d;!function(t,e){let i,s,n,a=Mt((()=>{E((()=>{i=!0,s||e.before(),n||(e.end(),ft()),e.after(),t.isConnected&&e.cleanup(),delete t._x_transitioning}))}));t._x_transitioning={beforeCancels:[],beforeCancel(t){this.beforeCancels.push(t)},cancel:Mt((function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();a()})),finish:a},E((()=>{e.start(),e.during()})),pt=!0,requestAnimationFrame((()=>{if(i)return;let a=1e3*Number(getComputedStyle(t).transitionDuration.replace(/,.*/,"").replace("s","")),r=1e3*Number(getComputedStyle(t).transitionDelay.replace(/,.*/,"").replace("s",""));0===a&&(a=1e3*Number(getComputedStyle(t).animationDuration.replace("s",""))),E((()=>{e.before()})),s=!0,requestAnimationFrame((()=>{i||(E((()=>{e.end()})),ft(),setTimeout(t._x_transitioning.finish,a+r),n=!0)}))}))}(t,{start(){o=e(t,s)},during(){l=e(t,i)},before:a,end(){o(),d=e(t,n)},after:r,cleanup(){l(),d()}})}function Lt(t,e,i){if(-1===t.indexOf(e))return i;const s=t[t.indexOf(e)+1];if(!s)return i;if("scale"===e&&isNaN(s))return i;if("duration"===e){let t=s.match(/([0-9]+)ms/);if(t)return t[1]}return"origin"===e&&["top","right","left","center","bottom"].includes(t[t.indexOf(e)+2])?[s,t[t.indexOf(e)+2]].join(" "):s}Q("transition",((t,{value:e,modifiers:i,expression:s},{evaluate:n})=>{"function"==typeof s&&(s=n(s)),s?function(t,e,i){At(t,St,""),{enter:e=>{t._x_transition.enter.during=e},"enter-start":e=>{t._x_transition.enter.start=e},"enter-end":e=>{t._x_transition.enter.end=e},leave:e=>{t._x_transition.leave.during=e},"leave-start":e=>{t._x_transition.leave.start=e},"leave-end":e=>{t._x_transition.leave.end=e}}[i](e)}(t,s,e):function(t,e,i){At(t,Dt);let s=!e.includes("in")&&!e.includes("out")&&!i,n=s||e.includes("in")||["enter"].includes(i),a=s||e.includes("out")||["leave"].includes(i);e.includes("in")&&!s&&(e=e.filter(((t,i)=>i<e.indexOf("out"))));e.includes("out")&&!s&&(e=e.filter(((t,i)=>i>e.indexOf("out"))));let r=!e.includes("opacity")&&!e.includes("scale"),o=r||e.includes("opacity"),l=r||e.includes("scale"),d=o?0:1,u=l?Lt(e,"scale",95)/100:1,c=Lt(e,"delay",0),h=Lt(e,"origin","center"),p="opacity, transform",g=Lt(e,"duration",150)/1e3,f=Lt(e,"duration",75)/1e3,m="cubic-bezier(0.4, 0.0, 0.2, 1)";n&&(t._x_transition.enter.during={transformOrigin:h,transitionDelay:c,transitionProperty:p,transitionDuration:`${g}s`,transitionTimingFunction:m},t._x_transition.enter.start={opacity:d,transform:`scale(${u})`},t._x_transition.enter.end={opacity:1,transform:"scale(1)"});a&&(t._x_transition.leave.during={transformOrigin:h,transitionDelay:c,transitionProperty:p,transitionDuration:`${f}s`,transitionTimingFunction:m},t._x_transition.leave.start={opacity:1,transform:"scale(1)"},t._x_transition.leave.end={opacity:d,transform:`scale(${u})`})}(t,i,e)})),window.Element.prototype._x_toggleAndCascadeWithTransitions=function(t,e,i,s){let n=()=>{"visible"===document.visibilityState?requestAnimationFrame(i):setTimeout(i)};e?t._x_transition&&(t._x_transition.enter||t._x_transition.leave)?t._x_transition.enter&&(Object.entries(t._x_transition.enter.during).length||Object.entries(t._x_transition.enter.start).length||Object.entries(t._x_transition.enter.end).length)?t._x_transition.in(i):n():t._x_transition?t._x_transition.in(i):n():(t._x_hidePromise=t._x_transition?new Promise(((e,i)=>{t._x_transition.out((()=>{}),(()=>e(s))),t._x_transitioning.beforeCancel((()=>i({isFromCancelledTransition:!0})))})):Promise.resolve(s),queueMicrotask((()=>{let e=It(t);e?(e._x_hideChildren||(e._x_hideChildren=[]),e._x_hideChildren.push(t)):queueMicrotask((()=>{let e=t=>{let i=Promise.all([t._x_hidePromise,...(t._x_hideChildren||[]).map(e)]).then((([t])=>t()));return delete t._x_hidePromise,delete t._x_hideChildren,i};e(t).catch((t=>{if(!t.isFromCancelledTransition)throw t}))}))})))};var Rt=!1;function jt(t,e=(()=>{})){return(...i)=>Rt?e(...i):t(...i)}function Pt(t,i,s,n=[]){switch(t._x_bindings||(t._x_bindings=e({})),t._x_bindings[i]=s,i=n.includes("camel")?i.toLowerCase().replace(/-(\w)/g,((t,e)=>e.toUpperCase())):i){case"value":!function(t,e){if("radio"===t.type)void 0===t.attributes.value&&(t.value=e),window.fromModel&&(t.checked=$t(t.value,e));else if("checkbox"===t.type)Number.isInteger(e)?t.value=e:Number.isInteger(e)||Array.isArray(e)||"boolean"==typeof e||[null,void 0].includes(e)?Array.isArray(e)?t.checked=e.some((e=>$t(e,t.value))):t.checked=!!e:t.value=String(e);else if("SELECT"===t.tagName)!function(t,e){const i=[].concat(e).map((t=>t+""));Array.from(t.options).forEach((t=>{t.selected=i.includes(t.value)}))}(t,e);else{if(t.value===e)return;t.value=e}}(t,s);break;case"style":!function(t,e){t._x_undoAddedStyles&&t._x_undoAddedStyles();t._x_undoAddedStyles=Dt(t,e)}(t,s);break;case"class":!function(t,e){t._x_undoAddedClasses&&t._x_undoAddedClasses();t._x_undoAddedClasses=St(t,e)}(t,s);break;default:!function(t,e,i){[null,void 0,!1].includes(i)&&function(t){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(t)}(e)?t.removeAttribute(e):(Vt(e)&&(i=e),function(t,e,i){t.getAttribute(e)!=i&&t.setAttribute(e,i)}(t,e,i))}(t,i,s)}}function $t(t,e){return t==e}function Vt(t){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(t)}function Ft(t,e){var i;return function(){var s=this,n=arguments,a=function(){i=null,t.apply(s,n)};clearTimeout(i),i=setTimeout(a,e)}}function Bt(t,e){let i;return function(){let s=this,n=arguments;i||(t.apply(s,n),i=!0,setTimeout((()=>i=!1),e))}}var zt={},Ht=!1;var Wt={};var qt={};var Ut={get reactive(){return e},get release(){return s},get effect(){return i},get raw(){return n},version:"3.9.6",flushAndStopDeferringMutations:function(){O=!1,S(k),k=[]},disableEffectScheduling:function(t){c=!1,t(),c=!0},setReactivityEngine:function(t){e=t.reactive,s=t.release,i=e=>t.effect(e,{scheduler:t=>{c?l(t):t()}}),n=t.raw},closestDataStack:A,skipDuringClone:jt,addRootSelector:xt,addInitSelector:Tt,addScopeToNode:D,deferMutations:function(){O=!0},mapAttributes:at,evaluateLater:z,setEvaluator:function(t){H=t},mergeProxies:I,findClosest:Ot,closestRoot:Et,interceptor:L,transition:Nt,setStyles:Dt,mutateDom:E,directive:Q,throttle:Bt,debounce:Ft,evaluate:B,initTree:kt,nextTick:gt,prefixed:J,prefix:function(t){K=t},plugin:function(t){t(Ut)},magic:P,store:function(t,i){if(Ht||(zt=e(zt),Ht=!0),void 0===i)return zt[t];zt[t]=i,"object"==typeof i&&null!==i&&i.hasOwnProperty("init")&&"function"==typeof i.init&&zt[t].init(),N(zt[t])},start:function(){var t;document.body||vt("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),ct(document,"alpine:init"),ct(document,"alpine:initializing"),w(),t=t=>kt(t,mt),f.push(t),m((t=>{mt(t,(t=>v(t)))})),function(t){p.push(t)}(((t,e)=>{G(t,e).forEach((t=>t()))})),Array.from(document.querySelectorAll(bt())).filter((t=>!Et(t.parentElement,!0))).forEach((t=>{kt(t)})),ct(document,"alpine:initialized")},clone:function(t,e){e._x_dataStack||(e._x_dataStack=t._x_dataStack),Rt=!0,function(t){let e=i;h(((t,i)=>{let n=e(t);return s(n),()=>{}})),t(),h(e)}((()=>{!function(t){let e=!1;kt(t,((t,i)=>{mt(t,((t,s)=>{if(e&&function(t){return wt().some((e=>t.matches(e)))}(t))return s();e=!0,i(t,s)}))}))}(e)})),Rt=!1},bound:function(t,e,i){if(t._x_bindings&&void 0!==t._x_bindings[e])return t._x_bindings[e];let s=t.getAttribute(e);return null===s?"function"==typeof i?i():i:Vt(e)?!![e,"true"].includes(s):""===s||s},$data:C,data:function(t,e){qt[t]=e},bind:function(t,e){Wt[t]="function"!=typeof e?()=>e:e}};function Kt(t,e){const i=Object.create(null),s=t.split(",");for(let t=0;t<s.length;t++)i[s[t]]=!0;return e?t=>!!i[t.toLowerCase()]:t=>!!i[t]}var Jt,Xt=Object.freeze({}),Qt=(Object.freeze([]),Object.assign),Gt=Object.prototype.hasOwnProperty,Zt=(t,e)=>Gt.call(t,e),Yt=Array.isArray,te=t=>"[object Map]"===ne(t),ee=t=>"symbol"==typeof t,ie=t=>null!==t&&"object"==typeof t,se=Object.prototype.toString,ne=t=>se.call(t),ae=t=>ne(t).slice(8,-1),re=t=>"string"==typeof t&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,oe=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},le=/-(\w)/g,de=(oe((t=>t.replace(le,((t,e)=>e?e.toUpperCase():"")))),/\B([A-Z])/g),ue=(oe((t=>t.replace(de,"-$1").toLowerCase())),oe((t=>t.charAt(0).toUpperCase()+t.slice(1)))),ce=(oe((t=>t?`on${ue(t)}`:"")),(t,e)=>t!==e&&(t==t||e==e)),he=new WeakMap,pe=[],ge=Symbol("iterate"),fe=Symbol("Map key iterate");var me=0;function ve(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}var _e=!0,ye=[];function we(){const t=ye.pop();_e=void 0===t||t}function be(t,e,i){if(!_e||void 0===Jt)return;let s=he.get(t);s||he.set(t,s=new Map);let n=s.get(i);n||s.set(i,n=new Set),n.has(Jt)||(n.add(Jt),Jt.deps.push(n),Jt.options.onTrack&&Jt.options.onTrack({effect:Jt,target:t,type:e,key:i}))}function xe(t,e,i,s,n,a){const r=he.get(t);if(!r)return;const o=new Set,l=t=>{t&&t.forEach((t=>{(t!==Jt||t.allowRecurse)&&o.add(t)}))};if("clear"===e)r.forEach(l);else if("length"===i&&Yt(t))r.forEach(((t,e)=>{("length"===e||e>=s)&&l(t)}));else switch(void 0!==i&&l(r.get(i)),e){case"add":Yt(t)?re(i)&&l(r.get("length")):(l(r.get(ge)),te(t)&&l(r.get(fe)));break;case"delete":Yt(t)||(l(r.get(ge)),te(t)&&l(r.get(fe)));break;case"set":te(t)&&l(r.get(ge))}o.forEach((r=>{r.options.onTrigger&&r.options.onTrigger({effect:r,target:t,key:i,type:e,newValue:s,oldValue:n,oldTarget:a}),r.options.scheduler?r.options.scheduler(r):r()}))}var Te=Kt("__proto__,__v_isRef,__isVue"),Ee=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(ee)),Oe=Me(),ke=Me(!1,!0),Se=Me(!0),Ce=Me(!0,!0),De={};function Me(t=!1,e=!1){return function(i,s,n){if("__v_isReactive"===s)return!t;if("__v_isReadonly"===s)return t;if("__v_raw"===s&&n===(t?e?ai:ni:e?si:ii).get(i))return i;const a=Yt(i);if(!t&&a&&Zt(De,s))return Reflect.get(De,s,n);const r=Reflect.get(i,s,n);if(ee(s)?Ee.has(s):Te(s))return r;if(t||be(i,"get",s),e)return r;if(ui(r)){return!a||!re(s)?r.value:r}return ie(r)?t?oi(r):ri(r):r}}function Ae(t=!1){return function(e,i,s,n){let a=e[i];if(!t&&(s=di(s),a=di(a),!Yt(e)&&ui(a)&&!ui(s)))return a.value=s,!0;const r=Yt(e)&&re(i)?Number(i)<e.length:Zt(e,i),o=Reflect.set(e,i,s,n);return e===di(n)&&(r?ce(s,a)&&xe(e,"set",i,s,a):xe(e,"add",i,s)),o}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];De[t]=function(...t){const i=di(this);for(let t=0,e=this.length;t<e;t++)be(i,"get",t+"");const s=e.apply(i,t);return-1===s||!1===s?e.apply(i,t.map(di)):s}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];De[t]=function(...t){ye.push(_e),_e=!1;const i=e.apply(this,t);return we(),i}}));var Ie={get:Oe,set:Ae(),deleteProperty:function(t,e){const i=Zt(t,e),s=t[e],n=Reflect.deleteProperty(t,e);return n&&i&&xe(t,"delete",e,void 0,s),n},has:function(t,e){const i=Reflect.has(t,e);return ee(e)&&Ee.has(e)||be(t,"has",e),i},ownKeys:function(t){return be(t,"iterate",Yt(t)?"length":ge),Reflect.ownKeys(t)}},Ne={get:Se,set:(t,e)=>(console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0),deleteProperty:(t,e)=>(console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0)},Le=(Qt({},Ie,{get:ke,set:Ae(!0)}),Qt({},Ne,{get:Ce}),t=>ie(t)?ri(t):t),Re=t=>ie(t)?oi(t):t,je=t=>t,Pe=t=>Reflect.getPrototypeOf(t);function $e(t,e,i=!1,s=!1){const n=di(t=t.__v_raw),a=di(e);e!==a&&!i&&be(n,"get",e),!i&&be(n,"get",a);const{has:r}=Pe(n),o=s?je:i?Re:Le;return r.call(n,e)?o(t.get(e)):r.call(n,a)?o(t.get(a)):void(t!==n&&t.get(e))}function Ve(t,e=!1){const i=this.__v_raw,s=di(i),n=di(t);return t!==n&&!e&&be(s,"has",t),!e&&be(s,"has",n),t===n?i.has(t):i.has(t)||i.has(n)}function Fe(t,e=!1){return t=t.__v_raw,!e&&be(di(t),"iterate",ge),Reflect.get(t,"size",t)}function Be(t){t=di(t);const e=di(this);return Pe(e).has.call(e,t)||(e.add(t),xe(e,"add",t,t)),this}function ze(t,e){e=di(e);const i=di(this),{has:s,get:n}=Pe(i);let a=s.call(i,t);a?ei(i,s,t):(t=di(t),a=s.call(i,t));const r=n.call(i,t);return i.set(t,e),a?ce(e,r)&&xe(i,"set",t,e,r):xe(i,"add",t,e),this}function He(t){const e=di(this),{has:i,get:s}=Pe(e);let n=i.call(e,t);n?ei(e,i,t):(t=di(t),n=i.call(e,t));const a=s?s.call(e,t):void 0,r=e.delete(t);return n&&xe(e,"delete",t,void 0,a),r}function We(){const t=di(this),e=0!==t.size,i=te(t)?new Map(t):new Set(t),s=t.clear();return e&&xe(t,"clear",void 0,void 0,i),s}function qe(t,e){return function(i,s){const n=this,a=n.__v_raw,r=di(a),o=e?je:t?Re:Le;return!t&&be(r,"iterate",ge),a.forEach(((t,e)=>i.call(s,o(t),o(e),n)))}}function Ue(t,e,i){return function(...s){const n=this.__v_raw,a=di(n),r=te(a),o="entries"===t||t===Symbol.iterator&&r,l="keys"===t&&r,d=n[t](...s),u=i?je:e?Re:Le;return!e&&be(a,"iterate",l?fe:ge),{next(){const{value:t,done:e}=d.next();return e?{value:t,done:e}:{value:o?[u(t[0]),u(t[1])]:u(t),done:e}},[Symbol.iterator](){return this}}}}function Ke(t){return function(...e){{const i=e[0]?`on key "${e[0]}" `:"";console.warn(`${ue(t)} operation ${i}failed: target is readonly.`,di(this))}return"delete"!==t&&this}}var Je={get(t){return $e(this,t)},get size(){return Fe(this)},has:Ve,add:Be,set:ze,delete:He,clear:We,forEach:qe(!1,!1)},Xe={get(t){return $e(this,t,!1,!0)},get size(){return Fe(this)},has:Ve,add:Be,set:ze,delete:He,clear:We,forEach:qe(!1,!0)},Qe={get(t){return $e(this,t,!0)},get size(){return Fe(this,!0)},has(t){return Ve.call(this,t,!0)},add:Ke("add"),set:Ke("set"),delete:Ke("delete"),clear:Ke("clear"),forEach:qe(!0,!1)},Ge={get(t){return $e(this,t,!0,!0)},get size(){return Fe(this,!0)},has(t){return Ve.call(this,t,!0)},add:Ke("add"),set:Ke("set"),delete:Ke("delete"),clear:Ke("clear"),forEach:qe(!0,!0)};function Ze(t,e){const i=e?t?Ge:Xe:t?Qe:Je;return(e,s,n)=>"__v_isReactive"===s?!t:"__v_isReadonly"===s?t:"__v_raw"===s?e:Reflect.get(Zt(i,s)&&s in e?i:e,s,n)}["keys","values","entries",Symbol.iterator].forEach((t=>{Je[t]=Ue(t,!1,!1),Qe[t]=Ue(t,!0,!1),Xe[t]=Ue(t,!1,!0),Ge[t]=Ue(t,!0,!0)}));var Ye={get:Ze(!1,!1)},ti=(Ze(!1,!0),{get:Ze(!0,!1)});Ze(!0,!0);function ei(t,e,i){const s=di(i);if(s!==i&&e.call(t,s)){const e=ae(t);console.warn(`Reactive ${e} contains both the raw and reactive versions of the same object${"Map"===e?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var ii=new WeakMap,si=new WeakMap,ni=new WeakMap,ai=new WeakMap;function ri(t){return t&&t.__v_isReadonly?t:li(t,!1,Ie,Ye,ii)}function oi(t){return li(t,!0,Ne,ti,ni)}function li(t,e,i,s,n){if(!ie(t))return console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const a=n.get(t);if(a)return a;const r=(o=t).__v_skip||!Object.isExtensible(o)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(ae(o));var o;if(0===r)return t;const l=new Proxy(t,2===r?s:i);return n.set(t,l),l}function di(t){return t&&di(t.__v_raw)||t}function ui(t){return Boolean(t&&!0===t.__v_isRef)}P("nextTick",(()=>gt)),P("dispatch",(t=>ct.bind(ct,t))),P("watch",((t,{evaluateLater:e,effect:i})=>(s,n)=>{let a,r=e(s),o=!0,l=i((()=>r((t=>{JSON.stringify(t),o?a=t:queueMicrotask((()=>{n(t,a),a=t})),o=!1}))));t._x_effects.delete(l)})),P("store",(function(){return zt})),P("data",(t=>C(t))),P("root",(t=>Et(t))),P("refs",(t=>(t._x_refs_proxy||(t._x_refs_proxy=I(function(t){let e=[],i=t;for(;i;)i._x_refs&&e.push(i._x_refs),i=i.parentNode;return e}(t))),t._x_refs_proxy)));var ci={};function hi(t){return ci[t]||(ci[t]=0),++ci[t]}function pi(t,e,i){P(e,(e=>vt(`You can't use [$${directiveName}] without first installing the "${t}" plugin here: https://alpine.dev/plugins/${i}`,e)))}P("id",(t=>(e,i=null)=>{let s=function(t,e){return Ot(t,(t=>{if(t._x_ids&&t._x_ids[e])return!0}))}(t,e),n=s?s._x_ids[e]:hi(e);return i?`${e}-${n}-${i}`:`${e}-${n}`})),P("el",(t=>t)),pi("Focus","focus","focus"),pi("Persist","persist","persist"),Q("modelable",((t,{expression:e},{effect:i,evaluateLater:s})=>{let n=s(e),a=()=>{let t;return n((e=>t=e)),t},r=s(`${e} = __placeholder`),o=t=>r((()=>{}),{scope:{__placeholder:t}}),l=a();o(l),queueMicrotask((()=>{if(!t._x_model)return;t._x_removeModelListeners.default();let e=t._x_model.get,s=t._x_model.set;i((()=>o(e()))),i((()=>s(a())))}))})),Q("teleport",((t,{expression:e},{cleanup:i})=>{"template"!==t.tagName.toLowerCase()&&vt("x-teleport can only be used on a <template> tag",t);let s=document.querySelector(e);s||vt(`Cannot find x-teleport element for selector: "${e}"`);let n=t.content.cloneNode(!0).firstElementChild;t._x_teleport=n,n._x_teleportBack=t,t._x_forwardEvents&&t._x_forwardEvents.forEach((e=>{n.addEventListener(e,(e=>{e.stopPropagation(),t.dispatchEvent(new e.constructor(e.type,e))}))})),D(n,{},t),E((()=>{s.appendChild(n),kt(n),n._x_ignore=!0})),i((()=>n.remove()))}));var gi=()=>{};function fi(t,e,i,s){let n=t,a=t=>s(t),r={},o=(t,e)=>i=>e(t,i);if(i.includes("dot")&&(e=e.replace(/-/g,".")),i.includes("camel")&&(e=function(t){return t.toLowerCase().replace(/-(\w)/g,((t,e)=>e.toUpperCase()))}(e)),i.includes("passive")&&(r.passive=!0),i.includes("capture")&&(r.capture=!0),i.includes("window")&&(n=window),i.includes("document")&&(n=document),i.includes("prevent")&&(a=o(a,((t,e)=>{e.preventDefault(),t(e)}))),i.includes("stop")&&(a=o(a,((t,e)=>{e.stopPropagation(),t(e)}))),i.includes("self")&&(a=o(a,((e,i)=>{i.target===t&&e(i)}))),(i.includes("away")||i.includes("outside"))&&(n=document,a=o(a,((e,i)=>{t.contains(i.target)||!1!==i.target.isConnected&&(t.offsetWidth<1&&t.offsetHeight<1||!1!==t._x_isShown&&e(i))}))),i.includes("once")&&(a=o(a,((t,i)=>{t(i),n.removeEventListener(e,a,r)}))),a=o(a,((t,s)=>{(function(t){return["keydown","keyup"].includes(t)})(e)&&function(t,e){let i=e.filter((t=>!["window","document","prevent","stop","once"].includes(t)));if(i.includes("debounce")){let t=i.indexOf("debounce");i.splice(t,mi((i[t+1]||"invalid-wait").split("ms")[0])?2:1)}if(0===i.length)return!1;if(1===i.length&&vi(t.key).includes(i[0]))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter((t=>i.includes(t)));if(i=i.filter((t=>!s.includes(t))),s.length>0){if(s.filter((e=>("cmd"!==e&&"super"!==e||(e="meta"),t[`${e}Key`]))).length===s.length&&vi(t.key).includes(i[0]))return!1}return!0}(s,i)||t(s)})),i.includes("debounce")){let t=i[i.indexOf("debounce")+1]||"invalid-wait",e=mi(t.split("ms")[0])?Number(t.split("ms")[0]):250;a=Ft(a,e)}if(i.includes("throttle")){let t=i[i.indexOf("throttle")+1]||"invalid-wait",e=mi(t.split("ms")[0])?Number(t.split("ms")[0]):250;a=Bt(a,e)}return n.addEventListener(e,a,r),()=>{n.removeEventListener(e,a,r)}}function mi(t){return!Array.isArray(t)&&!isNaN(t)}function vi(t){if(!t)return[];t=t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase();let e={ctrl:"control",slash:"/",space:"-",spacebar:"-",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"="};return e[t]=t,Object.keys(e).map((i=>{if(e[i]===t)return i})).filter((t=>t))}function _i(t){let e=t?parseFloat(t):null;return i=e,Array.isArray(i)||isNaN(i)?t:e;var i}function yi(t,e,i,s){let n={};if(/^\[.*\]$/.test(t.item)&&Array.isArray(e)){t.item.replace("[","").replace("]","").split(",").map((t=>t.trim())).forEach(((t,i)=>{n[t]=e[i]}))}else if(/^\{.*\}$/.test(t.item)&&!Array.isArray(e)&&"object"==typeof e){t.item.replace("{","").replace("}","").split(",").map((t=>t.trim())).forEach((t=>{n[t]=e[t]}))}else n[t.item]=e;return t.index&&(n[t.index]=i),t.collection&&(n[t.collection]=s),n}function wi(){}function bi(t,e,i){Q(e,(s=>vt(`You can't use [x-${e}] without first installing the "${t}" plugin here: https://alpine.dev/plugins/${i}`,s)))}gi.inline=(t,{modifiers:e},{cleanup:i})=>{e.includes("self")?t._x_ignoreSelf=!0:t._x_ignore=!0,i((()=>{e.includes("self")?delete t._x_ignoreSelf:delete t._x_ignore}))},Q("ignore",gi),Q("effect",((t,{expression:e},{effect:i})=>i(z(t,e)))),Q("model",((t,{modifiers:e,expression:i},{effect:s,cleanup:n})=>{let a=z(t,i),r=z(t,`${i} = rightSideOfExpression($event, ${i})`);var o="select"===t.tagName.toLowerCase()||["checkbox","radio"].includes(t.type)||e.includes("lazy")?"change":"input";let l=function(t,e,i){"radio"===t.type&&E((()=>{t.hasAttribute("name")||t.setAttribute("name",i)}));return(i,s)=>E((()=>{if(i instanceof CustomEvent&&void 0!==i.detail)return i.detail||i.target.value;if("checkbox"===t.type){if(Array.isArray(s)){let t=e.includes("number")?_i(i.target.value):i.target.value;return i.target.checked?s.concat([t]):s.filter((e=>!(e==t)))}return i.target.checked}if("select"===t.tagName.toLowerCase()&&t.multiple)return e.includes("number")?Array.from(i.target.selectedOptions).map((t=>_i(t.value||t.text))):Array.from(i.target.selectedOptions).map((t=>t.value||t.text));{let t=i.target.value;return e.includes("number")?_i(t):e.includes("trim")?t.trim():t}}))}(t,e,i),d=fi(t,o,e,(t=>{r((()=>{}),{scope:{$event:t,rightSideOfExpression:l}})}));t._x_removeModelListeners||(t._x_removeModelListeners={}),t._x_removeModelListeners.default=d,n((()=>t._x_removeModelListeners.default()));let u=z(t,`${i} = __placeholder`);t._x_model={get(){let t;return a((e=>t=e)),t},set(t){u((()=>{}),{scope:{__placeholder:t}})}},t._x_forceModelUpdate=()=>{a((e=>{void 0===e&&i.match(/\./)&&(e=""),window.fromModel=!0,E((()=>Pt(t,"value",e))),delete window.fromModel}))},s((()=>{e.includes("unintrusive")&&document.activeElement.isSameNode(t)||t._x_forceModelUpdate()}))})),Q("cloak",(t=>queueMicrotask((()=>E((()=>t.removeAttribute(J("cloak")))))))),Tt((()=>`[${J("init")}]`)),Q("init",jt(((t,{expression:e},{evaluate:i})=>"string"==typeof e?!!e.trim()&&i(e,{},!1):i(e,{},!1)))),Q("text",((t,{expression:e},{effect:i,evaluateLater:s})=>{let n=s(e);i((()=>{n((e=>{E((()=>{t.textContent=e}))}))}))})),Q("html",((t,{expression:e},{effect:i,evaluateLater:s})=>{let n=s(e);i((()=>{n((e=>{E((()=>{t.innerHTML=e,t._x_ignoreSelf=!0,kt(t),delete t._x_ignoreSelf}))}))}))})),at(it(":",J("bind:"))),Q("bind",((t,{value:e,modifiers:i,expression:s,original:n},{effect:a})=>{if(!e)return function(t,e,i,s){let n={};a=n,Object.entries(Wt).forEach((([t,e])=>{Object.defineProperty(a,t,{get:()=>(...t)=>e(...t)})}));var a;let r=z(t,e),o=[];for(;o.length;)o.pop()();r((e=>{let s=Object.entries(e).map((([t,e])=>({name:t,value:e}))),n=function(t){return Array.from(t).map(st()).filter((t=>!rt(t)))}(s);s=s.map((t=>n.find((e=>e.name===t.name))?{name:`x-bind:${t.name}`,value:`"${t.value}"`}:t)),G(t,s,i).map((t=>{o.push(t.runCleanups),t()}))}),{scope:n})}(t,s,n);if("key"===e)return function(t,e){t._x_keyExpression=e}(t,s);let r=z(t,s);a((()=>r((n=>{void 0===n&&s.match(/\./)&&(n=""),E((()=>Pt(t,e,n,i)))}))))})),xt((()=>`[${J("data")}]`)),Q("data",jt(((t,{expression:i},{cleanup:s})=>{i=""===i?"{}":i;let n={};$(n,t);let a={};var r,o;r=a,o=n,Object.entries(qt).forEach((([t,e])=>{Object.defineProperty(r,t,{get:()=>(...t)=>e.bind(o)(...t),enumerable:!1})}));let l=B(t,i,{scope:a});void 0===l&&(l={}),$(l,t);let d=e(l);N(d);let u=D(t,d);d.init&&B(t,d.init),s((()=>{d.destroy&&B(t,d.destroy),u()}))}))),Q("show",((t,{modifiers:e,expression:i},{effect:s})=>{let n=z(t,i);t._x_doHide||(t._x_doHide=()=>{E((()=>t.style.display="none"))}),t._x_doShow||(t._x_doShow=()=>{E((()=>{1===t.style.length&&"none"===t.style.display?t.removeAttribute("style"):t.style.removeProperty("display")}))});let a,r=()=>{t._x_doHide(),t._x_isShown=!1},o=()=>{t._x_doShow(),t._x_isShown=!0},l=()=>setTimeout(o),d=Mt((t=>t?o():r()),(e=>{"function"==typeof t._x_toggleAndCascadeWithTransitions?t._x_toggleAndCascadeWithTransitions(t,e,o,r):e?l():r()})),u=!0;s((()=>n((t=>{(u||t!==a)&&(e.includes("immediate")&&(t?l():r()),d(t),a=t,u=!1)}))))})),Q("for",((t,{expression:i},{effect:s,cleanup:n})=>{let a=function(t){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,i=/^\s*\(|\)\s*$/g,s=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,n=t.match(s);if(!n)return;let a={};a.items=n[2].trim();let r=n[1].replace(i,"").trim(),o=r.match(e);o?(a.item=r.replace(e,"").trim(),a.index=o[1].trim(),o[2]&&(a.collection=o[2].trim())):a.item=r;return a}(i),r=z(t,a.items),o=z(t,t._x_keyExpression||"index");t._x_prevKeys=[],t._x_lookup={},s((()=>function(t,i,s,n){let a=t=>"object"==typeof t&&!Array.isArray(t),r=t;s((s=>{var o;o=s,!Array.isArray(o)&&!isNaN(o)&&s>=0&&(s=Array.from(Array(s).keys(),(t=>t+1))),void 0===s&&(s=[]);let l=t._x_lookup,u=t._x_prevKeys,c=[],h=[];if(a(s))s=Object.entries(s).map((([t,e])=>{let a=yi(i,e,t,s);n((t=>h.push(t)),{scope:{index:t,...a}}),c.push(a)}));else for(let t=0;t<s.length;t++){let e=yi(i,s[t],t,s);n((t=>h.push(t)),{scope:{index:t,...e}}),c.push(e)}let p=[],g=[],f=[],m=[];for(let t=0;t<u.length;t++){let e=u[t];-1===h.indexOf(e)&&f.push(e)}u=u.filter((t=>!f.includes(t)));let v="template";for(let t=0;t<h.length;t++){let e=h[t],i=u.indexOf(e);if(-1===i)u.splice(t,0,e),p.push([v,t]);else if(i!==t){let e=u.splice(t,1)[0],s=u.splice(i-1,1)[0];u.splice(t,0,s),u.splice(i,0,e),g.push([e,s])}else m.push(e);v=e}for(let t=0;t<f.length;t++){let e=f[t];l[e]._x_effects&&l[e]._x_effects.forEach(d),l[e].remove(),l[e]=null,delete l[e]}for(let t=0;t<g.length;t++){let[e,i]=g[t],s=l[e],n=l[i],a=document.createElement("div");E((()=>{n.after(a),s.after(n),n._x_currentIfEl&&n.after(n._x_currentIfEl),a.before(s),s._x_currentIfEl&&s.after(s._x_currentIfEl),a.remove()})),M(n,c[h.indexOf(i)])}for(let t=0;t<p.length;t++){let[i,s]=p[t],n="template"===i?r:l[i];n._x_currentIfEl&&(n=n._x_currentIfEl);let a=c[s],o=h[s],d=document.importNode(r.content,!0).firstElementChild;D(d,e(a),r),E((()=>{n.after(d),kt(d)})),"object"==typeof o&&vt("x-for key cannot be an object, it must be a string or an integer",r),l[o]=d}for(let t=0;t<m.length;t++)M(l[m[t]],c[h.indexOf(m[t])]);r._x_prevKeys=h}))}(t,a,r,o))),n((()=>{Object.values(t._x_lookup).forEach((t=>t.remove())),delete t._x_prevKeys,delete t._x_lookup}))})),wi.inline=(t,{expression:e},{cleanup:i})=>{let s=Et(t);s._x_refs||(s._x_refs={}),s._x_refs[e]=t,i((()=>delete s._x_refs[e]))},Q("ref",wi),Q("if",((t,{expression:e},{effect:i,cleanup:s})=>{let n=z(t,e);i((()=>n((e=>{e?(()=>{if(t._x_currentIfEl)return t._x_currentIfEl;let e=t.content.cloneNode(!0).firstElementChild;D(e,{},t),E((()=>{t.after(e),kt(e)})),t._x_currentIfEl=e,t._x_undoIf=()=>{mt(e,(t=>{t._x_effects&&t._x_effects.forEach(d)})),e.remove(),delete t._x_currentIfEl}})():t._x_undoIf&&(t._x_undoIf(),delete t._x_undoIf)})))),s((()=>t._x_undoIf&&t._x_undoIf()))})),Q("id",((t,{expression:e},{evaluate:i})=>{i(e).forEach((e=>function(t,e){t._x_ids||(t._x_ids={}),t._x_ids[e]||(t._x_ids[e]=hi(e))}(t,e)))})),at(it("@",J("on:"))),Q("on",jt(((t,{value:e,modifiers:i,expression:s},{cleanup:n})=>{let a=s?z(t,s):()=>{};"template"===t.tagName.toLowerCase()&&(t._x_forwardEvents||(t._x_forwardEvents=[]),t._x_forwardEvents.includes(e)||t._x_forwardEvents.push(e));let r=fi(t,e,i,(t=>{a((()=>{}),{scope:{$event:t},params:[t]})}));n((()=>r()))}))),bi("Collapse","collapse","collapse"),bi("Intersect","intersect","intersect"),bi("Focus","trap","focus"),Ut.setEvaluator(W),Ut.setReactivityEngine({reactive:ri,effect:function(t,e=Xt){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const i=function(t,e){const i=function(){if(!i.active)return t();if(!pe.includes(i)){ve(i);try{return ye.push(_e),_e=!0,pe.push(i),Jt=i,t()}finally{pe.pop(),we(),Jt=pe[pe.length-1]}}};return i.id=me++,i.allowRecurse=!!e.allowRecurse,i._isEffect=!0,i.active=!0,i.raw=t,i.deps=[],i.options=e,i}(t,e);return e.lazy||i(),i},release:function(t){t.active&&(ve(t),t.options.onStop&&t.options.onStop(),t.active=!1)},raw:di});var xi=Ut,Ti={};Ti=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function e(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?t(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const s=(t,e,i,s)=>(t=""+t,e=""+e,s&&(t=t.trim(),e=e.trim()),i?t==e:t.toLowerCase()==e.toLowerCase());function n(t,e){var i,s={};for(i in t)e.indexOf(i)<0&&(s[i]=t[i]);return s}function a(t){var e=document.createElement("div");return t.replace(/\&#?[0-9a-z]+;/gi,(function(t){return e.innerHTML=t,e.innerText}))}function r(t,e){for(e=e||"previous";t=t[e+"Sibling"];)if(3==t.nodeType)return t}function o(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):t}function l(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1);return t===Object(t)&&"Array"!=e&&"Function"!=e&&"RegExp"!=e&&"HTMLUnknownElement"!=e}function d(t,e,i){function s(t,e){for(var i in e)if(e.hasOwnProperty(i)){if(l(e[i])){l(t[i])?s(t[i],e[i]):t[i]=Object.assign({},e[i]);continue}if(Array.isArray(e[i])){t[i]=Object.assign([],e[i]);continue}t[i]=e[i]}}return t instanceof Object||(t={}),s(t,e),i&&s(t,i),t}function u(t){return String.prototype.normalize?"string"==typeof t?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:t}var c=()=>/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent);function h(t){return t&&t.classList&&t.classList.contains(this.settings.classNames.tag)}var p={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,keepInvalidTags:!1,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:()=>{},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"Â "},autoComplete:{enabled:!0,rightKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,highlightFirst:!1,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:()=>Promise.resolve(),beforePaste:()=>Promise.resolve(),suggestionClick:()=>Promise.resolve()}};function g(){this.dropdown={};for(let t in this._dropdown)this.dropdown[t]="function"==typeof this._dropdown[t]?this._dropdown[t].bind(this):this._dropdown[t];this.dropdown.refs()}var f={refs(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-dropdown-wrapper']")},show(t){var e,i,n,a=this.settings,r="mix"==a.mode&&!a.enforceWhitelist,o=!a.whitelist||!a.whitelist.length,d="manual"==a.dropdown.position;if(t=void 0===t?this.state.inputText:t,(!o||r||a.templates.dropdownItemNoMatch)&&!1!==a.dropdown.enable&&!this.state.isLoading){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(t),t&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",t),a.templates.dropdownItemNoMatch&&(n=a.templates.dropdownItemNoMatch.call(this,{value:t}))),!n){if(this.suggestedListItems.length)t&&r&&!this.state.editing.scope&&!s(this.suggestedListItems[0].value,t)&&this.suggestedListItems.unshift({value:t});else{if(!t||!r||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:t}]}i=""+(l(e=this.suggestedListItems[0])?e.value:e),a.autoComplete&&i&&0==i.indexOf(t)&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(n),a.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.children[0]),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=t||!0,this.state.dropdown.query=t,this.setStateSelection(),d||setTimeout((()=>{this.dropdown.position(),this.dropdown.render()})),setTimeout((()=>{this.trigger("dropdown:show",this.DOM.dropdown)}))}},hide(t){var e=this.DOM,i=e.scope,s=e.dropdown,n="manual"==this.settings.dropdown.position&&!t;if(s&&document.body.contains(s)&&!n)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),i.setAttribute("aria-expanded",!1),s.parentNode.removeChild(s),setTimeout((()=>{this.state.dropdown.visible=!1}),100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",s),this},toggle(t){this.dropdown[this.state.dropdown.visible&&!t?"hide":"show"]()},render(){var t,e,i=((e=this.DOM.dropdown.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(e),t=e.clientHeight,e.parentNode.removeChild(e),t),s=this.settings;return"number"==typeof s.dropdown.enabled&&s.dropdown.enabled>=0?(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(s.classNames.dropdownInital),this.dropdown.position(i),s.dropdown.appendTarget.appendChild(this.DOM.dropdown),setTimeout((()=>this.DOM.dropdown.classList.remove(s.classNames.dropdownInital)))),this):this},fill(t){t="string"==typeof t?t:this.dropdown.createListHTML(t||this.suggestedListItems);var e,i=this.settings.templates.dropdownContent.call(this,t);this.DOM.dropdown.content.innerHTML=(e=i)?e.replace(/\>[\r\n ]+\</g,"><").replace(/(<.*?>)|\s+/g,((t,e)=>e||" ")):""},refilter(t){t=t||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(t),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},position(t){var e=this.settings.dropdown;if("manual"!=e.position){var i,s,n,a,r,o,l=this.DOM.dropdown,d=e.placeAbove,u=document.documentElement.clientHeight,c=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)>480?e.position:"all",h=this.DOM["input"==c?"input":"scope"];t=t||l.clientHeight,this.state.dropdown.visible&&("text"==c?(n=(i=this.getCaretGlobalPosition()).bottom,s=i.top,a=i.left,r="auto"):(o=function(t){for(var e=0,i=0;t;)e+=t.offsetLeft||0,i+=t.offsetTop||0,t=t.parentNode;return{left:e,top:i}}(this.settings.dropdown.appendTarget),s=(i=h.getBoundingClientRect()).top-o.top,n=i.bottom-1-o.top,a=i.left-o.left,r=i.width+"px"),s=Math.floor(s),n=Math.ceil(n),d=void 0===d?u-i.bottom<t:d,l.style.cssText="left:"+(a+window.pageXOffset)+"px; width:"+r+";"+(d?"top: "+(s+window.pageYOffset)+"px":"top: "+(n+window.pageYOffset)+"px"),l.setAttribute("placement",d?"top":"bottom"),l.setAttribute("position",c))}},events:{binding(t=!0){var e=this.dropdown.events.callbacks,i=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},s=t?"addEventListener":"removeEventListener";"manual"!=this.settings.dropdown.position&&(window[s]("resize",i.position),window[s]("keydown",i.onKeyDown)),this.DOM.dropdown[s]("mouseover",i.onMouseOver),this.DOM.dropdown[s]("mouseleave",i.onMouseLeave),this.DOM.dropdown[s]("mousedown",i.onClick),this.DOM.dropdown.content[s]("scroll",i.onScroll)},callbacks:{onKeyDown(t){var e=this.DOM.dropdown.querySelector(this.settings.classNames.dropdownItemActiveSelector),i=this.dropdown.getSuggestionDataByNode(e);switch(t.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":var s;t.preventDefault(),e&&(e=e[("ArrowUp"==t.key||"Up"==t.key?"previous":"next")+"ElementSibling"]),e||(s=this.DOM.dropdown.content.children,e=s["ArrowUp"==t.key||"Up"==t.key?s.length-1:0]),i=this.dropdown.getSuggestionDataByNode(e),this.dropdown.highlightOption(e,!0);break;case"Escape":case"Esc":this.dropdown.hide();break;case"ArrowRight":if(this.state.actions.ArrowLeft)return;case"Tab":if("mix"!=this.settings.mode&&e&&!this.settings.autoComplete.rightKey&&!this.state.editing){t.preventDefault();var n=this.dropdown.getMappedValue(i);return this.input.autocomplete.set.call(this,n),!1}return!0;case"Enter":t.preventDefault(),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:i,suggestionElm:e}).then((()=>{if(e)return this.dropdown.selectOption(e);this.dropdown.hide(),"mix"!=this.settings.mode&&this.addTags(this.state.inputText.trim(),!0)})).catch((t=>t));break;case"Backspace":{if("mix"==this.settings.mode||this.state.editing.scope)return;const t=this.input.raw.call(this);""!=t&&8203!=t.charCodeAt(0)||(!0===this.settings.backspace?this.removeTags():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0))}}},onMouseOver(t){var e=t.target.closest(this.settings.classNames.dropdownItemSelector);e&&this.dropdown.highlightOption(e)},onMouseLeave(t){this.dropdown.highlightOption()},onClick(t){if(0==t.button&&t.target!=this.DOM.dropdown&&t.target!=this.DOM.dropdown.content){var e=t.target.closest(this.settings.classNames.dropdownItemSelector),i=this.dropdown.getSuggestionDataByNode(e);this.state.actions.selectOption=!0,setTimeout((()=>this.state.actions.selectOption=!1),50),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:i,suggestionElm:e}).then((()=>{e?this.dropdown.selectOption(e):this.dropdown.hide()})).catch((t=>console.warn(t)))}},onScroll(t){var e=t.target,i=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(i)})}}},getSuggestionDataByNode(t){var e=t?+t.getAttribute("tagifySuggestionIdx"):-1;return this.suggestedListItems[e]||null},highlightOption(t,e){var i,s=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(s),this.state.ddItemElm.removeAttribute("aria-selected")),!t)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);i=this.suggestedListItems[this.getNodeIndex(t)],this.state.ddItemData=i,this.state.ddItemElm=t,t.classList.add(s),t.setAttribute("aria-selected",!0),e&&(t.parentNode.scrollTop=t.clientHeight+t.offsetTop-t.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,i),this.dropdown.position())},selectOption(t){var e=this.settings.dropdown,i=e.clearOnSelect,s=e.closeOnSelect;if(!t)return this.addTags(this.state.inputText,!0),void(s&&this.dropdown.hide());var n=t.getAttribute("tagifySuggestionIdx"),a=this.suggestedListItems[+n];this.trigger("dropdown:select",{data:a,elm:t}),n&&a?(this.state.editing?this.onEditTagDone(null,d({__isValid:!0},this.normalizeTags([a])[0])):this["mix"==this.settings.mode?"addMixTags":"addTags"]([a],i),this.DOM.input.parentNode&&(setTimeout((()=>{this.DOM.input.focus(),this.toggleFocusClass(!0)})),s?setTimeout(this.dropdown.hide.bind(this)):this.dropdown.refilter())):this.dropdown.hide()},selectAll(t){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e=this.dropdown.filterListItems("");return t||(e=this.state.dropdown.suggestions),this.addTags(e,!0),this},filterListItems(t,e){var i,s,n,a,r,o=this.settings,d=o.dropdown,c=(e=e||{},t="select"==o.mode&&this.value.length&&this.value[0][o.tagTextProp]==t?"":t,[]),h=[],p=o.whitelist,g=d.maxItems||1/0,f=d.searchKeys,m=0;if(!t||!f.length)return c=o.duplicates?p:p.filter((t=>!this.isTagDuplicate(l(t)?t.value:t))),this.state.dropdown.suggestions=c,c.slice(0,g);function v(t,e){return e.toLowerCase().split(" ").every((e=>t.includes(e.toLowerCase())))}for(r=d.caseSensitive?""+t:(""+t).toLowerCase();m<p.length;m++){let t,g;i=p[m]instanceof Object?p[m]:{value:p[m]};let _=Object.keys(i).some((t=>f.includes(t)))?f:["value"];d.fuzzySearch&&!e.exact?(n=_.reduce(((t,e)=>t+" "+(i[e]||"")),"").toLowerCase().trim(),d.accentedSearch&&(n=u(n),r=u(r)),t=0==n.indexOf(r),g=n===r,s=v(n,r)):(t=!0,s=_.some((t=>{var s=""+(i[t]||"");return d.accentedSearch&&(s=u(s),r=u(r)),d.caseSensitive||(s=s.toLowerCase()),g=s===r,e.exact?s===r:0==s.indexOf(r)}))),a=!o.duplicates&&this.isTagDuplicate(l(i)?i.value:i),s&&!a&&(g&&t?h.push(i):"startsWith"==d.sortby&&t?c.unshift(i):c.push(i))}return this.state.dropdown.suggestions=h.concat(c),"function"==typeof d.sortby?d.sortby(h.concat(c),r):h.concat(c).slice(0,g)},getMappedValue(t){var e=this.settings.dropdown.mapValueTo;return e?"function"==typeof e?e(t):t[e]||t.value:t.value},createListHTML(t){return d([],t).map(((t,e)=>{"string"!=typeof t&&"number"!=typeof t||(t={value:t});var i=this.dropdown.getMappedValue(t);t.value=i&&"string"==typeof i?o(i):i;var s=this.settings.templates.dropdownItem.apply(this,[t,this]);return s.replace(/\s*tagifySuggestionIdx=(["'])(.*?)\1/gim,"").replace(">",` tagifySuggestionIdx="${e}">`)})).join("")}};const m="@yaireo/tagify/";var v,_={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},y={wrapper:(t,e)=>`<tags class="${e.classNames.namespace} ${e.mode?`${e.classNames[e.mode+"Mode"]}`:""} ${t.className}"\n                    ${e.readonly?"readonly":""}\n                    ${e.disabled?"disabled":""}\n                    ${e.required?"required":""}\n                    ${"select"===e.mode?"spellcheck='false'":""}\n                    tabIndex="-1">\n            <span ${!e.readonly&&e.userInput?"contenteditable":""} tabIndex="0" data-placeholder="${e.placeholder||"&#8203;"}" aria-placeholder="${e.placeholder||""}"\n                class="${e.classNames.input}"\n                role="textbox"\n                aria-autocomplete="both"\n                aria-multiline="${"mix"==e.mode}"></span>\n                &#8203;\n        </tags>`,tag(t,e){var i=this.settings;return`<tag title="${t.title||t.value}"\n                    contenteditable='false'\n                    spellcheck='false'\n                    tabIndex="${i.a11y.focusableTags?0:-1}"\n                    class="${i.classNames.tag} ${t.class||""}"\n                    ${this.getAttributes(t)}>\n            <x title='' class="${i.classNames.tagX}" role='button' aria-label='remove tag'></x>\n            <div>\n                <span class="${i.classNames.tagText}">${t[i.tagTextProp]||t.value}</span>\n            </div>\n        </tag>`},dropdown(t){var e=t.dropdown,i="manual"==e.position,s=`${t.classNames.dropdown}`;return`<div class="${i?"":s} ${e.classname}" role="listbox" aria-labelledby="dropdown">\n                    <div data-selector='tagify-dropdown-wrapper' class="${t.classNames.dropdownWrapper}"></div>\n                </div>`},dropdownContent(t){var e=this.settings,i=this.state.dropdown.suggestions;return`\n            ${e.templates.dropdownHeader.call(this,i)}\n            ${t}\n            ${e.templates.dropdownFooter.call(this,i)}\n        `},dropdownItem(t,e){return`<div ${this.getAttributes(t)}\n                    class='${this.settings.classNames.dropdownItem} ${t.class?t.class:""}'\n                    tabindex="0"\n                    role="option">${t.value}</div>`},dropdownHeader:t=>"",dropdownFooter(t){var e=t.length-this.settings.dropdown.maxItems;return e>0?`<footer data-selector='tagify-suggestions-footer' class="${this.settings.classNames.dropdownFooter}">\n                ${e} more items. Refine your search.\n            </footer>`:""},dropdownItemNoMatch:null},w={customBinding(){this.customEventsList.forEach((t=>{this.on(t,this.settings.callbacks[t])}))},binding(t=!0){var e,i=this.events.callbacks,s=t?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!t){for(var n in this.state.mainEvents=t,t&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),e=this.listeners.main=this.listeners.main||{focus:["input",i.onFocusBlur.bind(this)],keydown:["input",i.onKeydown.bind(this)],click:["scope",i.onClickScope.bind(this)],dblclick:["scope",i.onDoubleClickScope.bind(this)],paste:["input",i.onPaste.bind(this)],drop:["input",i.onDrop.bind(this)]})this.DOM[e[n][0]][s](n,e[n][1]);clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(i.observeOriginalInputValue.bind(this),500);var a=this.listeners.main.inputMutationObserver||new MutationObserver(i.onInputDOMChange.bind(this));a&&a.disconnect(),"mix"==this.settings.mode&&a.observe(this.DOM.input,{childList:!0})}},bindGlobal(t){var e,i=this.events.callbacks,s=t?"removeEventListener":"addEventListener";if(t||!this.listeners.global)for(e of(this.listeners.global=this.listeners&&this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:i[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:i.onWindowKeyDown.bind(this)},{type:"blur",target:this.DOM.input,cb:i.onFocusBlur.bind(this)}],this.listeners.global))e.target[s](e.type,e.cb)},unbindGlobal(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur(t){var e=t.target?this.trim(t.target.textContent):"",i=this.settings,s=t.type,n=i.dropdown.enabled>=0,a={relatedTarget:t.relatedTarget},r=this.state.actions.selectOption&&(n||!i.dropdown.closeOnSelect),o=this.state.actions.addNew&&n,l=t.relatedTarget&&h.call(this,t.relatedTarget)&&this.DOM.scope.contains(t.relatedTarget);if("blur"==s){if(t.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),this.triggerChangeEvent()}if(!r&&!o)if(this.state.hasFocus="focus"==s&&+new Date,this.toggleFocusClass(this.state.hasFocus),"mix"!=i.mode){if("focus"==s)return this.trigger("focus",a),void(0!==i.dropdown.enabled&&i.userInput||this.dropdown.show(this.value.length?"":void 0));if("blur"==s){var d,u;this.trigger("blur",a),this.loading(!1);let t=i.enforceWhitelist?!!this.getWhitelistItem(null===(d=this.value)||void 0===d||null===(u=d[0])||void 0===u?void 0:u.value):i.keepInvalidTags;"select"==this.settings.mode&&l&&(e=""),"select"!==this.settings.mode&&e&&!this.state.actions.selectOption&&i.addTagOnBlur&&this.addTags(e,!0),"select"!=this.settings.mode||e&&t||this.removeTags()}this.DOM.input.removeAttribute("style"),this.dropdown.hide()}else"focus"==s?this.trigger("focus",a):"blur"==t.type&&(this.trigger("blur",a),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onWindowKeyDown(t){var e,i=document.activeElement;if(h.call(this,i)&&this.DOM.scope.contains(document.activeElement))switch(e=i.nextElementSibling,t.key){case"Backspace":this.settings.readonly||(this.removeTags(i),(e||this.DOM.input).focus());break;case"Enter":setTimeout(this.editTag.bind(this),0,i)}},onKeydown(t){var e=this.settings;"select"==e.mode&&e.enforceWhitelist&&this.value.length&&"Tab"!=t.key&&t.preventDefault();var i=this.trim(t.target.textContent);if(this.trigger("keydown",{originalEvent:this.cloneEvent(t)}),"mix"==e.mode){switch(t.key){case"Left":case"ArrowLeft":this.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(this.state.editing)return;var s,n,o,l=document.getSelection(),d="Delete"==t.key&&l.anchorOffset==(l.anchorNode.length||0),u=l.anchorNode.previousSibling,p=1==l.anchorNode.nodeType||!l.anchorOffset&&u&&1==u.nodeType&&l.anchorNode.previousSibling,g=a(this.DOM.input.innerHTML),f=this.getTagElms();if("edit"==e.backspace&&p)return s=1==l.anchorNode.nodeType?null:l.anchorNode.previousElementSibling,setTimeout(this.editTag.bind(this),0,s),void t.preventDefault();if(c()&&p)return o=r(p),p.hasAttribute("readonly")||p.remove(),this.DOM.input.focus(),void setTimeout((()=>{this.placeCaretAfterNode(o),this.DOM.input.click()}));if("BR"==l.anchorNode.nodeName)return;if((d||p)&&1==l.anchorNode.nodeType?n=0==l.anchorOffset?d?f[0]:null:f[l.anchorOffset-1]:d?n=l.anchorNode.nextElementSibling:p&&(n=p),3==l.anchorNode.nodeType&&!l.anchorNode.nodeValue&&l.anchorNode.previousElementSibling&&t.preventDefault(),(p||d)&&!e.backspace)return void t.preventDefault();if("Range"!=l.type&&!l.anchorOffset&&l.anchorNode==this.DOM.input&&"Delete"!=t.key)return void t.preventDefault();if("Range"!=l.type&&n&&n.hasAttribute("readonly"))return void this.placeCaretAfterNode(r(n));clearTimeout(v),v=setTimeout((()=>{var t=document.getSelection(),e=a(this.DOM.input.innerHTML),i=!d&&t.anchorNode.previousSibling;if(e.length>=g.length&&i)if(h.call(this,i)&&!i.hasAttribute("readonly")){if(this.removeTags(i),this.fixFirefoxLastTagNoCaret(),2==this.DOM.input.children.length&&"BR"==this.DOM.input.children[1].tagName)return this.DOM.input.innerHTML="",this.value.length=0,!0}else i.remove();this.value=[].map.call(f,((t,e)=>{var i=this.tagData(t);if(t.parentNode||i.readonly)return i;this.trigger("remove",{tag:t,index:e,data:i})})).filter((t=>t))}),20)}return!0}switch(t.key){case"Backspace":"select"==e.mode&&e.enforceWhitelist&&this.value.length?this.removeTags():this.state.dropdown.visible&&"manual"!=e.dropdown.position||""!=t.target.textContent&&8203!=i.charCodeAt(0)||(!0===e.backspace?this.removeTags():"edit"==e.backspace&&setTimeout(this.editTag.bind(this),0));break;case"Esc":case"Escape":if(this.state.dropdown.visible)return;t.target.blur();break;case"Down":case"ArrowDown":this.state.dropdown.visible||this.dropdown.show();break;case"ArrowRight":{let t=this.state.inputSuggestion||this.state.ddItemData;if(t&&e.autoComplete.rightKey)return void this.addTags([t],!0);break}case"Tab":{let s="select"==e.mode;if(!i||s)return!0;t.preventDefault()}case"Enter":if(this.state.dropdown.visible||229==t.keyCode)return;t.preventDefault(),setTimeout((()=>{this.state.actions.selectOption||this.addTags(i,!0)}))}},onInput(t){if(this.postUpdate(),"mix"==this.settings.mode)return this.events.callbacks.onMixTagsInput.call(this,t);var e=this.input.normalize.call(this),i=e.length>=this.settings.dropdown.enabled,s={value:e,inputElm:this.DOM.input};s.isValid=this.validateTag({value:e}),this.state.inputText!=e&&(this.input.set.call(this,e,!1),-1!=e.search(this.settings.delimiters)?this.addTags(e)&&this.input.set.call(this):this.settings.dropdown.enabled>=0&&this.dropdown[i?"show":"hide"](e),this.trigger("input",s))},onMixTagsInput(t){var e,i,s,n,a,r,o,l,u=this.settings,h=this.value.length,p=this.getTagElms(),g=document.createDocumentFragment(),f=window.getSelection().getRangeAt(0),m=[].map.call(p,(t=>this.tagData(t).value));if("deleteContentBackward"==t.inputType&&c()&&this.events.callbacks.onKeydown.call(this,{target:t.target,key:"Backspace"}),this.value.slice().forEach((t=>{t.readonly&&!m.includes(t.value)&&g.appendChild(this.createTagElem(t))})),g.childNodes.length&&(f.insertNode(g),this.setRangeAtStartEnd(!1,g.lastChild)),p.length!=h)return this.value=[].map.call(this.getTagElms(),(t=>this.tagData(t))),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(r=window.getSelection()).rangeCount>0&&3==r.anchorNode.nodeType){if((f=r.getRangeAt(0).cloneRange()).collapse(!0),f.setStart(r.focusNode,0),s=(e=f.toString().slice(0,f.endOffset)).split(u.pattern).length-1,(i=e.match(u.pattern))&&(n=e.slice(e.lastIndexOf(i[i.length-1]))),n){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:n.match(u.pattern)[0],value:n.replace(u.pattern,"")},this.state.tag.baseOffset=r.baseOffset-this.state.tag.value.length,l=this.state.tag.value.match(u.delimiters))return this.state.tag.value=this.state.tag.value.replace(u.delimiters,""),this.state.tag.delimiters=l[0],this.addTags(this.state.tag.value,u.dropdown.clearOnSelect),void this.dropdown.hide();a=this.state.tag.value.length>=u.dropdown.enabled;try{o=(o=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&o.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch(t){}(o||s<this.state.mixMode.matchedPatternCount)&&(a=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=s}setTimeout((()=>{this.update({withoutChangeEvent:!0}),this.trigger("input",d({},this.state.tag,{textContent:this.DOM.input.textContent})),this.state.tag&&this.dropdown[a?"show":"hide"](this.state.tag.value)}),10)},onInputIE(t){var e=this;setTimeout((function(){e.events.callbacks.onInput.call(e,t)}))},observeOriginalInputValue(){this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickScope(t){var e=this.settings,i=t.target.closest("."+e.classNames.tag),s=+new Date-this.state.hasFocus;if(t.target!=this.DOM.scope){if(!t.target.classList.contains(e.classNames.tagX))return i?(this.trigger("click",{tag:i,index:this.getNodeIndex(i),data:this.tagData(i),originalEvent:this.cloneEvent(t)}),void(1!==e.editTags&&1!==e.editTags.clicks||this.events.callbacks.onDoubleClickScope.call(this,t))):void(t.target==this.DOM.input&&("mix"==e.mode&&this.fixFirefoxLastTagNoCaret(),s>500)?this.state.dropdown.visible?this.dropdown.hide():0===e.dropdown.enabled&&"mix"!=e.mode&&this.dropdown.show(this.value.length?"":void 0):"select"==e.mode&&!this.state.dropdown.visible&&this.dropdown.show());this.removeTags(t.target.parentNode)}else this.state.hasFocus||this.DOM.input.focus()},onPaste(t){t.preventDefault();var e,i,s=this.settings;if("select"==s.mode&&s.enforceWhitelist||!s.userInput)return!1;s.readonly||(e=t.clipboardData||window.clipboardData,i=e.getData("Text"),s.hooks.beforePaste(t,{tagify:this,pastedText:i,clipboardData:e}).then((e=>{void 0===e&&(e=i),e&&(this.injectAtCaret(e,window.getSelection().getRangeAt(0)),"mix"==this.settings.mode?this.events.callbacks.onMixTagsInput.call(this,t):this.settings.pasteAsTags?this.addTags(this.state.inputText+e,!0):this.state.inputText=e)})).catch((t=>t)))},onDrop(t){t.preventDefault()},onEditTagInput(t,e){var i=t.closest("."+this.settings.classNames.tag),s=this.getNodeIndex(i),n=this.tagData(i),a=this.input.normalize.call(this,t),r=i.innerHTML!=i.__tagifyTagData.__originalHTML,o=this.validateTag({[this.settings.tagTextProp]:a});r||!0!==t.originalIsValid||(o=!0),i.classList.toggle(this.settings.classNames.tagInvalid,!0!==o),n.__isValid=o,i.title=!0===o?n.title||n.value:o,a.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=a),this.dropdown.show(a)),this.trigger("edit:input",{tag:i,index:s,data:d({},this.value[s],{newValue:a}),originalEvent:this.cloneEvent(e)})},onEditTagFocus(t){this.state.editing={scope:t,input:t.querySelector("[contenteditable]")}},onEditTagBlur(t){if(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(t)){var e,i,s=this.settings,n=t.closest("."+s.classNames.tag),a=this.input.normalize.call(this,t),r=this.tagData(n).__originalData,o=n.innerHTML!=n.__tagifyTagData.__originalHTML,l=this.validateTag({[s.tagTextProp]:a});if(a)if(o){if(e=this.hasMaxTags(),i=this.getWhitelistItem(a)||d({},r,{[s.tagTextProp]:a,value:a,__isValid:l}),s.transformTag.call(this,i,r),!0!==(l=(!e||!0===r.__isValid)&&this.validateTag({[s.tagTextProp]:i[s.tagTextProp]}))){if(this.trigger("invalid",{data:i,tag:n,message:l}),s.editTags.keepInvalid)return;s.keepInvalidTags?i.__isValid=l:i=r}else s.keepInvalidTags&&(delete i.title,delete i["aria-invalid"],delete i.class);this.onEditTagDone(n,i)}else this.onEditTagDone(n,r);else this.onEditTagDone(n)}},onEditTagkeydown(t,e){switch(this.trigger("edit:keydown",{originalEvent:this.cloneEvent(t)}),t.key){case"Esc":case"Escape":e.innerHTML=e.__tagifyTagData.__originalHTML;case"Enter":case"Tab":t.preventDefault(),t.target.blur()}},onDoubleClickScope(t){var e,i,s=t.target.closest("."+this.settings.classNames.tag),n=this.settings;s&&n.userInput&&(e=s.classList.contains(this.settings.classNames.tagEditing),i=s.hasAttribute("readonly"),"select"==n.mode||n.readonly||e||i||!this.settings.editTags||this.editTag(s),this.toggleFocusClass(!0),this.trigger("dblclick",{tag:s,index:this.getNodeIndex(s),data:this.tagData(s)}))},onInputDOMChange(t){t.forEach((t=>{t.addedNodes.forEach((t=>{if(t)if("<div><br></div>"==t.outerHTML)t.replaceWith(document.createElement("br"));else if(1==t.nodeType&&t.querySelector(this.settings.classNames.tagSelector)){let e=document.createTextNode("");3==t.childNodes[0].nodeType&&"BR"!=t.previousSibling.nodeName&&(e=document.createTextNode("\n")),t.replaceWith(e,...[...t.childNodes].slice(0,-1)),this.placeCaretAfterNode(e.previousSibling)}else h.call(this,t)&&t.previousSibling&&"BR"==t.previousSibling.nodeName&&(t.previousSibling.replaceWith("\nâ"),this.placeCaretAfterNode(t.previousSibling.previousSibling))})),t.removedNodes.forEach((t=>{t&&"BR"==t.nodeName&&h.call(this,e)&&(this.removeTags(e),this.fixFirefoxLastTagNoCaret())}))}));var e=this.DOM.input.lastChild;e&&""==e.nodeValue&&e.remove(),e&&"BR"==e.nodeName||this.DOM.input.appendChild(document.createElement("br"))}}};function b(t,e){if(!t){console.warn("Tagify:","input element not found",t);const e=new Proxy(this,{get:()=>()=>e});return e}if(t.previousElementSibling&&t.previousElementSibling.classList.contains("tagify"))return console.warn("Tagify: ","input element is already Tagified",t),this;var i;d(this,function(t){var e=document.createTextNode("");function i(t,i,s){s&&i.split(/\s+/g).forEach((i=>e[t+"EventListener"].call(e,i,s)))}return{off(t,e){return i("remove",t,e),this},on(t,e){return e&&"function"==typeof e&&i("add",t,e),this},trigger(i,s,n){var a;if(n=n||{cloneData:!0},i)if(t.settings.isJQueryPlugin)"remove"==i&&(i="removeTag"),jQuery(t.DOM.originalInput).triggerHandler(i,[s]);else{try{var r="object"==typeof s?s:{value:s};if((r=n.cloneData?d({},r):r).tagify=this,s instanceof Object)for(var o in s)s[o]instanceof HTMLElement&&(r[o]=s[o]);a=new CustomEvent(i,{detail:r})}catch(t){console.warn(t)}e.dispatchEvent(a)}}}}(this)),this.isFirefox="undefined"!=typeof InstallTrigger,this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(i=e.id,t=>{let e,s="/"+t;if(1==localStorage.getItem(m+i+"/v",1))try{e=JSON.parse(localStorage[m+i+s])}catch(t){}return e}),this.setPersistedData=(t=>t?(localStorage.setItem(m+t+"/v",1),(e,i)=>{let s="/"+i,n=JSON.stringify(e);e&&i&&(localStorage.setItem(m+t+s,n),dispatchEvent(new Event("storage")))}):()=>{})(e.id),this.clearPersistedData=(t=>e=>{const i=m+"/"+t+"/";if(e)localStorage.removeItem(i+e);else for(let t in localStorage)t.includes(i)&&localStorage.removeItem(t)})(e.id),this.applySettings(t,e),this.state={inputText:"",editing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(t),g.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),t.autofocus&&this.DOM.input.focus()}return b.prototype={_dropdown:f,customEventsList:["change","add","remove","invalid","input","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim(t){return this.settings.trim&&t&&"string"==typeof t?t.trim():t},parseHTML:function(t){return(new DOMParser).parseFromString(t.trim(),"text/html").body.firstElementChild},templates:y,parseTemplate(t,e){return t=this.settings.templates[t]||t,this.parseHTML(t.apply(this,e))},set whitelist(t){const e=t&&Array.isArray(t);this.settings.whitelist=e?t:[],this.setPersistedData(e?t:[],"whitelist")},get whitelist(){return this.settings.whitelist},applySettings(t,i){p.templates=this.templates;var s=this.settings=d({},p,i);s.disabled=t.hasAttribute("disabled"),s.readonly=s.readonly||t.hasAttribute("readonly"),s.placeholder=o(t.getAttribute("placeholder")||s.placeholder||""),s.required=t.hasAttribute("required");for(let t in s.classNames)Object.defineProperty(s.classNames,t+"Selector",{get(){return"."+this[t].split(" ")[0]}});if(this.isIE&&(s.autoComplete=!1),["whitelist","blacklist"].forEach((e=>{var i=t.getAttribute("data-"+e);i&&(i=i.split(s.delimiters))instanceof Array&&(s[e]=i)})),"autoComplete"in i&&!l(i.autoComplete)&&(s.autoComplete=p.autoComplete,s.autoComplete.enabled=i.autoComplete),"mix"==s.mode&&(s.autoComplete.rightKey=!0,s.delimiters=i.delimiters||null,s.tagTextProp&&!s.dropdown.searchKeys.includes(s.tagTextProp)&&s.dropdown.searchKeys.push(s.tagTextProp)),t.pattern)try{s.pattern=new RegExp(t.pattern)}catch(t){}if(this.settings.delimiters)try{s.delimiters=new RegExp(this.settings.delimiters,"g")}catch(t){}s.disabled&&(s.userInput=!1),this.TEXTS=e(e({},_),s.texts||{}),"select"!=s.mode&&s.userInput||(s.dropdown.enabled=0),s.dropdown.appendTarget=i.dropdown&&i.dropdown.appendTarget?i.dropdown.appendTarget:document.body;let n=this.getPersistedData("whitelist");Array.isArray(n)&&(this.whitelist=Array.isArray(s.whitelist)?function(){const t=[],e={};for(let i of arguments)for(let s of i)l(s)?e[s.value]||(t.push(s),e[s.value]=1):t.includes(s)||t.push(s);return t}(s.whitelist,n):n)},getAttributes(t){var e,i=this.getCustomAttributes(t),s="";for(e in i)s+=" "+e+(void 0!==t[e]?`="${i[e]}"`:"");return s},getCustomAttributes(t){if(!l(t))return"";var e,i={};for(e in t)"__"!=e.slice(0,2)&&"class"!=e&&t.hasOwnProperty(e)&&void 0!==t[e]&&(i[e]=o(t[e]));return i},setStateSelection(){var t=window.getSelection(),e={anchorOffset:t.anchorOffset,anchorNode:t.anchorNode,range:t.getRangeAt&&t.rangeCount&&t.getRangeAt(0)};return this.state.selection=e,e},getCaretGlobalPosition(){const t=document.getSelection();if(t.rangeCount){const e=t.getRangeAt(0),i=e.startContainer,s=e.startOffset;let n,a;if(s>0)return a=document.createRange(),a.setStart(i,s-1),a.setEnd(i,s),n=a.getBoundingClientRect(),{left:n.right,top:n.top,bottom:n.bottom};if(i.getBoundingClientRect)return i.getBoundingClientRect()}return{left:-9999,top:-9999}},getCSSVars(){var t,e=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(({value:t,unit:e})=>"s"==e?1e3*t:t)(function(t){if(!t)return{};var e=(t=t.trim().split(" ")[0]).split(/\d+/g).filter((t=>t)).pop().trim();return{value:+t.split(e).filter((t=>t))[0].trim(),unit:e}}((t="tag-hide-transition",e.getPropertyValue("--"+t))))}},build(t){var e=this.DOM;this.settings.mixMode.integrated?(e.originalInput=null,e.scope=t,e.input=t):(e.originalInput=t,e.originalInput_tabIndex=t.tabIndex,e.scope=this.parseTemplate("wrapper",[t,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),t.parentNode.insertBefore(e.scope,t),t.tabIndex=-1)},destroy(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,this.dropdown.hide(!0),clearTimeout(this.dropdownHide__bindEventsTimeout)},loadOriginalValues(t){var e,i=this.settings;if(this.state.blockChangeEvent=!0,void 0===t){const e=this.getPersistedData("value");t=e&&!this.DOM.originalInput.value?e:i.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),t)if("mix"==i.mode)this.parseMixTags(this.trim(t)),(e=this.DOM.input.lastChild)&&"BR"==e.tagName||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{JSON.parse(t)instanceof Array&&(t=JSON.parse(t))}catch(t){}this.addTags(t).forEach((t=>t&&t.classList.add(i.classNames.tagNoAnimation)))}else this.postUpdate();this.state.lastOriginalValueReported=i.mixMode.integrated?"":this.DOM.originalInput.value,this.state.blockChangeEvent=!1},cloneEvent(t){var e={};for(var i in t)e[i]=t[i];return e},loading(t){return this.state.isLoading=t,this.DOM.scope.classList[t?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading(t,e){return t&&t.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass(t,e){"string"==typeof t&&this.DOM.scope.classList.toggle(t,e)},toggleFocusClass(t){this.toggleClass(this.settings.classNames.focus,!!t)},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var t=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==t.value,i=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=t.value,i.simulated=!0,t._valueTracker&&t._valueTracker.setValue(Math.random()),t.dispatchEvent(i),this.trigger("change",this.state.lastOriginalValueReported),t.value=this.state.lastOriginalValueReported)}},events:w,fixFirefoxLastTagNoCaret(){},placeCaretAfterNode(t){if(t&&t.parentNode){var e=t.nextSibling,i=window.getSelection(),s=i.getRangeAt(0);i.rangeCount&&(s.setStartAfter(e||t),s.collapse(!0),i.removeAllRanges(),i.addRange(s))}},insertAfterTag(t,e){if(e=e||this.settings.mixMode.insertAfterTag,t&&t.parentNode&&e)return e="string"==typeof e?document.createTextNode(e):e,t.parentNode.insertBefore(e,t.nextSibling),e},editTag(t,e){t=t||this.getLastTag(),e=e||{},this.dropdown.hide();var i=this.settings;function s(){return t.querySelector(i.classNames.tagTextSelector)}var n=s(),a=this.getNodeIndex(t),r=this.tagData(t),o=this.events.callbacks,l=this,u=!0;if(n){if(!(r instanceof Object&&"editable"in r)||r.editable)return n.setAttribute("contenteditable",!0),t.classList.add(i.classNames.tagEditing),this.tagData(t,{__originalData:d({},r),__originalHTML:t.innerHTML}),n.addEventListener("focus",o.onEditTagFocus.bind(this,t)),n.addEventListener("blur",(function(){setTimeout((()=>o.onEditTagBlur.call(l,s())))})),n.addEventListener("input",o.onEditTagInput.bind(this,n)),n.addEventListener("keydown",(e=>o.onEditTagkeydown.call(this,e,t))),n.focus(),this.setRangeAtStartEnd(!1,n),e.skipValidation||(u=this.editTagToggleValidity(t)),n.originalIsValid=u,this.trigger("edit:start",{tag:t,index:a,data:r,isValid:u}),this}else console.warn("Cannot find element in Tag template: .",i.classNames.tagTextSelector)},editTagToggleValidity(t,e){var i;if(e=e||this.tagData(t))return(i=!("__isValid"in e)||!0===e.__isValid)||this.removeTagsFromValue(t),this.update(),t.classList.toggle(this.settings.classNames.tagNotAllowed,!i),e.__isValid;console.warn("tag has no data: ",t,e)},onEditTagDone(t,e){e=e||{};var i={tag:t=t||this.state.editing.scope,index:this.getNodeIndex(t),previousData:this.tagData(t),data:e};this.trigger("edit:beforeUpdate",i,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,t&&e[this.settings.tagTextProp]?(t=this.replaceTag(t,e),this.editTagToggleValidity(t,e),this.settings.a11y.focusableTags?t.focus():this.placeCaretAfterNode(t.previousSibling)):t&&this.removeTags(t),this.trigger("edit:updated",i),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag(t,e){e&&e.value||(e=t.__tagifyTagData),e.__isValid&&1!=e.__isValid&&d(e,this.getInvalidTagAttrs(e,e.__isValid));var i=this.createTagElem(e);return t.parentNode.replaceChild(i,t),this.updateValueByDOMTags(),i},updateValueByDOMTags(){this.value.length=0,[].forEach.call(this.getTagElms(),(t=>{t.classList.contains(this.settings.classNames.tagNotAllowed.split(" ")[0])||this.value.push(this.tagData(t))})),this.update()},setRangeAtStartEnd(t,e){t="number"==typeof t?t:!!t,e=(e=e||this.DOM.input).lastChild||e;var i=document.getSelection();try{i.rangeCount>=1&&["Start","End"].forEach((s=>i.getRangeAt(0)["set"+s](e,t||e.length)))}catch(t){}},injectAtCaret(t,e){if(e=e||this.state.selection.range)return"string"==typeof t&&(t=document.createTextNode(t)),e.deleteContents(),e.insertNode(t),this.setRangeAtStartEnd(!1,t),this.updateValueByDOMTags(),this.update(),this},input:{set(t="",e=!0){var i=this.settings.dropdown.closeOnSelect;this.state.inputText=t,e&&(this.DOM.input.innerHTML=o(""+t)),!t&&i&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw(){return this.DOM.input.textContent},validate(){var t=!this.state.inputText||!0===this.validateTag({value:this.state.inputText});return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!t),t},normalize(t){var e=t||this.DOM.input,i=[];e.childNodes.forEach((t=>3==t.nodeType&&i.push(t.nodeValue))),i=i.join("\n");try{i=i.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch(t){}return i=i.replace(/\s/g," "),this.settings.trim&&(i=i.replace(/^\s+/,"")),i},autocomplete:{suggest(t){if(this.settings.autoComplete.enabled){"string"==typeof(t=t||{})&&(t={value:t});var e=t.value?""+t.value:"",i=e.substr(0,this.state.inputText.length).toLowerCase(),s=e.substring(this.state.inputText.length);e&&this.state.inputText&&i==this.state.inputText.toLowerCase()?(this.DOM.input.setAttribute("data-suggest",s),this.state.inputSuggestion=t):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}},set(t){var e=this.DOM.input.getAttribute("data-suggest"),i=t||(e?this.state.inputText+e:null);return!!i&&("mix"==this.settings.mode?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+i)):(this.input.set.call(this,i),this.setRangeAtStartEnd()),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx(t){return this.value.findIndex((e=>e.__tagId==(t||{}).__tagId))},getNodeIndex(t){var e=0;if(t)for(;t=t.previousElementSibling;)e++;return e},getTagElms(...t){var e="."+[...this.settings.classNames.tag.split(" "),...t].join(".");return[].slice.call(this.DOM.scope.querySelectorAll(e))},getLastTag(){var t=this.DOM.scope.querySelectorAll(`${this.settings.classNames.tagSelector}:not(.${this.settings.classNames.tagHide}):not([readonly])`);return t[t.length-1]},tagData:(t,e,i)=>t?(e&&(t.__tagifyTagData=i?e:d({},t.__tagifyTagData||{},e)),t.__tagifyTagData):(console.warn("tag element doesn't exist",t,e),e),isTagDuplicate(t,e){var i=this.settings;return"select"!=i.mode&&this.value.reduce(((n,a)=>s(this.trim(""+t),a.value,e||i.dropdown.caseSensitive)?n+1:n),0)},getTagIndexByValue(t){var e=[];return this.getTagElms().forEach(((i,n)=>{s(this.trim(i.textContent),t,this.settings.dropdown.caseSensitive)&&e.push(n)})),e},getTagElmByValue(t){var e=this.getTagIndexByValue(t)[0];return this.getTagElms()[e]},flashTag(t){t&&(t.classList.add(this.settings.classNames.tagFlash),setTimeout((()=>{t.classList.remove(this.settings.classNames.tagFlash)}),100))},isTagBlacklisted(t){return t=this.trim(t.toLowerCase()),this.settings.blacklist.filter((e=>(""+e).toLowerCase()==t)).length},isTagWhitelisted(t){return!!this.getWhitelistItem(t)},getWhitelistItem(t,e,i){e=e||"value";var n,a=this.settings;return(i=i||a.whitelist).some((i=>{var r="string"==typeof i?i:i[e]||i.value;if(s(r,t,a.dropdown.caseSensitive,a.trim))return n="string"==typeof i?{value:i}:i,!0})),n||"value"!=e||"value"==a.tagTextProp||(n=this.getWhitelistItem(t,a.tagTextProp,i)),n},validateTag(t){var e=this.settings,i="value"in t?"value":e.tagTextProp,s=this.trim(t[i]+"");return(t[i]+"").trim()?e.pattern&&e.pattern instanceof RegExp&&!e.pattern.test(s)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(s,this.state.editing)?this.TEXTS.duplicate:this.isTagBlacklisted(s)||e.enforceWhitelist&&!this.isTagWhitelisted(s)?this.TEXTS.notAllowed:!e.validate||e.validate(t):this.TEXTS.empty},getInvalidTagAttrs(t,e){return{"aria-invalid":!0,class:`${t.class||""} ${this.settings.classNames.tagNotAllowed}`.trim(),title:e}},hasMaxTags(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly(t,e){var i=this.settings;document.activeElement.blur(),i[e||"readonly"]=t,this.DOM.scope[(t?"set":"remove")+"Attribute"](e||"readonly",!0),this.setContentEditable(!t)},setContentEditable(t){!this.settings.readonly&&this.settings.userInput&&(this.DOM.input.contentEditable=t,this.DOM.input.tabIndex=t?0:-1)},setDisabled(t){this.setReadonly(t,"disabled")},normalizeTags(t){var e=this.settings,i=e.whitelist,s=e.delimiters,n=e.mode,a=e.tagTextProp;e.enforceWhitelist;var r=[],o=!!i&&i[0]instanceof Object,l=t instanceof Array,d=t=>(t+"").split(s).filter((t=>t)).map((t=>({[a]:this.trim(t),value:this.trim(t)})));if("number"==typeof t&&(t=t.toString()),"string"==typeof t){if(!t.trim())return[];t=d(t)}else l&&(t=[].concat(...t.map((t=>t.value?t:d(t)))));return o&&(t.forEach((t=>{var e=r.map((t=>t.value)),i=this.dropdown.filterListItems.call(this,t[a],{exact:!0});this.settings.duplicates||(i=i.filter((t=>!e.includes(t.value))));var s=i.length>1?this.getWhitelistItem(t[a],a,i):i[0];s&&s instanceof Object?r.push(s):"mix"!=n&&(null==t.value&&(t.value=t[a]),r.push(t))})),r.length&&(t=r)),t},parseMixTags(t){var e=this.settings,i=e.mixTagsInterpolator,s=e.duplicates,n=e.transformTag,a=e.enforceWhitelist,r=e.maxTags,o=e.tagTextProp,l=[];return t=t.split(i[0]).map(((t,e)=>{var d,u,c,h=t.split(i[1]),p=h[0],g=l.length==r;try{if(p==+p)throw Error;u=JSON.parse(p)}catch(t){u=this.normalizeTags(p)[0]||{value:p}}if(n.call(this,u),g||!(h.length>1)||a&&!this.isTagWhitelisted(u.value)||!s&&this.isTagDuplicate(u.value)){if(t)return e?i[0]+t:t}else u[d=u[o]?o:"value"]=this.trim(u[d]),c=this.createTagElem(u),l.push(u),c.classList.add(this.settings.classNames.tagNoAnimation),h[0]=c.outerHTML,this.value.push(u);return h.join("")})).join(""),this.DOM.input.innerHTML=t,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize(),this.getTagElms().forEach(((t,e)=>this.tagData(t,l[e]))),this.update({withoutChangeEvent:!0}),t},replaceTextWithNode(t,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var i,s,n=window.getSelection(),a=n.anchorNode,r=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return a.splitText(n.anchorOffset-r),-1==(i=a.nodeValue.lastIndexOf(e))||(s=a.splitText(i),t&&a.parentNode.replaceChild(t,s)),!0}},selectTag(t,e){var i=this.settings;if(!i.enforceWhitelist||this.isTagWhitelisted(e.value)){this.input.set.call(this,e[i.tagTextProp]||e.value,!0),this.state.actions.selectOption&&setTimeout(this.setRangeAtStartEnd.bind(this));var s=this.getLastTag();return s?this.replaceTag(s,e):this.appendTag(t),this.value[0]=e,this.update(),this.trigger("add",{tag:t,data:e}),[t]}},addEmptyTag(t){var e=d({value:""},t||{}),i=this.createTagElem(e);this.tagData(i,e),this.appendTag(i),this.editTag(i,{skipValidation:!0})},addTags(t,e,i){var s=[],n=this.settings,a=document.createDocumentFragment();return i=i||n.skipInvalid,t&&0!=t.length?(t=this.normalizeTags(t),"mix"==n.mode?this.addMixTags(t):("select"==n.mode&&(e=!1),this.DOM.input.removeAttribute("style"),t.forEach((t=>{var e,r={},o=Object.assign({},t,{value:t.value+""});if(t=Object.assign({},o),n.transformTag.call(this,t),t.__isValid=this.hasMaxTags()||this.validateTag(t),!0!==t.__isValid){if(i)return;d(r,this.getInvalidTagAttrs(t,t.__isValid),{__preInvalidData:o}),t.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(t.value))}if("readonly"in t&&(t.readonly?r["aria-readonly"]=!0:delete t.readonly),e=this.createTagElem(t,r),s.push(e),"select"==n.mode)return this.selectTag(e,t);a.appendChild(e),t.__isValid&&!0===t.__isValid?(this.value.push(t),this.trigger("add",{tag:e,index:this.value.length-1,data:t})):(this.trigger("invalid",{data:t,index:this.value.length,tag:e,message:t.__isValid}),n.keepInvalidTags||setTimeout((()=>this.removeTags(e,!0)),1e3)),this.dropdown.position()})),this.appendTag(a),this.update(),t.length&&e&&this.input.set.call(this),this.dropdown.refilter(),s)):("select"==n.mode&&this.removeAllTags(),s)},addMixTags(t){if((t=this.normalizeTags(t))[0].prefix||this.state.tag)return this.prefixedTextToTag(t[0]);"string"==typeof t&&(t=[{value:t}]);var e=!!this.state.selection,i=document.createDocumentFragment();return t.forEach((t=>{var e=this.createTagElem(t);i.appendChild(e),this.insertAfterTag(e)})),e?this.injectAtCaret(i):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(i),this.updateValueByDOMTags(),this.update()),i},prefixedTextToTag(t){var e,i=this.settings,s=this.state.tag.delimiters;if(i.transformTag.call(this,t),t.prefix=t.prefix||this.state.tag?this.state.tag.prefix:(i.pattern.source||i.pattern)[0],e=this.createTagElem(t),this.replaceTextWithNode(e)||this.DOM.input.appendChild(e),setTimeout((()=>e.classList.add(this.settings.classNames.tagNoAnimation)),300),this.value.push(t),this.update(),!s){var n=this.insertAfterTag(e)||e;this.placeCaretAfterNode(n)}return this.state.tag=null,this.trigger("add",d({},{tag:e},{data:t})),e},appendTag(t){var e=this.DOM,i=e.input;i===e.input?e.scope.insertBefore(t,i):e.scope.appendChild(t)},createTagElem(t,i){t.__tagId="10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)));var s,n=d({},t,e({value:o(t.value+"")},i));return function(t){for(var e,i=document.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);e=i.nextNode();)e.textContent.trim()||e.parentNode.removeChild(e)}(s=this.parseTemplate("tag",[n])),this.tagData(s,t),s},reCheckInvalidTags(){var t=this.settings;this.getTagElms(t.classNames.tagNotAllowed).forEach(((t,e)=>{var i=this.tagData(t),s=this.hasMaxTags(),n=this.validateTag(i);if(!0===n&&!s)return i=i.__preInvalidData?i.__preInvalidData:{value:i.value},this.replaceTag(t,i);t.title=s||n}))},removeTags(t,e,i){var s;if(t=t&&t instanceof HTMLElement?[t]:t instanceof Array?t:t?[t]:[this.getLastTag()],s=t.reduce(((t,e)=>{e&&"string"==typeof e&&(e=this.getTagElmByValue(e));var i=this.tagData(e);return e&&i&&!i.readonly&&t.push({node:e,idx:this.getTagIdx(i),data:this.tagData(e,{__removed:!0})}),t}),[]),i="number"==typeof i?i:this.CSSVars.tagHideTransition,"select"==this.settings.mode&&(i=0,this.input.set.call(this)),1==s.length&&s[0].node.classList.contains(this.settings.classNames.tagNotAllowed)&&(e=!0),s.length)return this.settings.hooks.beforeRemoveTag(s,{tagify:this}).then((()=>{function t(t){t.node.parentNode&&(t.node.parentNode.removeChild(t.node),e?this.settings.keepInvalidTags&&this.trigger("remove",{tag:t.node,index:t.idx}):(this.trigger("remove",{tag:t.node,index:t.idx,data:t.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()))}i&&i>10&&1==s.length?function(e){e.node.style.width=parseFloat(window.getComputedStyle(e.node).width)+"px",document.body.clientTop,e.node.classList.add(this.settings.classNames.tagHide),setTimeout(t.bind(this),i,e)}.call(this,s[0]):s.forEach(t.bind(this)),e||(this.removeTagsFromValue(s.map((t=>t.node))),this.update(),"select"==this.settings.mode&&this.setContentEditable(!0))})).catch((t=>{}))},removeTagsFromDOM(){[].slice.call(this.getTagElms()).forEach((t=>t.parentNode.removeChild(t)))},removeTagsFromValue(t){(t=Array.isArray(t)?t:[t]).forEach((t=>{var e=this.tagData(t),i=this.getTagIdx(e);i>-1&&this.value.splice(i,1)}))},removeAllTags(t){t=t||{},this.value=[],"mix"==this.settings.mode?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.position(),"select"==this.settings.mode&&(this.input.set.call(this),this.setContentEditable(!0)),this.update(t)},postUpdate(){var t=this.settings.classNames,e="mix"==this.settings.mode?this.settings.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(t.hasMaxTags,this.value.length>=this.settings.maxTags),this.toggleClass(t.hasNoTags,!this.value.length),this.toggleClass(t.empty,!e)},setOriginalInputValue(t){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=t,e.tagifyValue=e.value,this.setPersistedData(t,"value"))},update(t){var e=this.getInputValue();this.setOriginalInputValue(e),this.postUpdate(),(t||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent()},getInputValue(){var t=this.getCleanValue();return"mix"==this.settings.mode?this.getMixedTagsAsString(t):t.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(t):JSON.stringify(t):""},getCleanValue(t){var e,i;return e=t||this.value,i=this.dataProps,e&&Array.isArray(e)&&e.map((t=>n(t,i)))},getMixedTagsAsString(){var t="",e=this,i=this.settings.mixTagsInterpolator;return function s(a){a.childNodes.forEach((a=>{if(1==a.nodeType){const r=e.tagData(a);if("BR"==a.tagName&&(t+="\r\n"),a.getAttribute("style")||["B","I","U"].includes(a.tagName))t+=a.textContent;else if("DIV"==a.tagName||"P"==a.tagName)t+="\r\n",s(a);else if(h.call(e,a)&&r){if(r.__removed)return;t+=i[0]+JSON.stringify(n(r,e.dataProps))+i[1]}}else t+=a.textContent}))}(this.DOM.input),t}},b.prototype.removeTag=b.prototype.removeTags,b}();var Ei,Oi={};
/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/Ei=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},i=!e.document&&!!e.postMessage,s=i&&/blob:/i.test((e.location||{}).protocol),n={},a=0,r={parse:function(i,s){var o=(s=s||{}).dynamicTyping||!1;if(b(o)&&(s.dynamicTypingFunction=o,o={}),s.dynamicTyping=o,s.transform=!!b(s.transform)&&s.transform,s.worker&&r.WORKERS_SUPPORTED){var l=function(){if(!r.WORKERS_SUPPORTED)return!1;var i,s,o=(i=e.URL||e.webkitURL||null,s=t.toString(),r.BLOB_URL||(r.BLOB_URL=i.createObjectURL(new Blob(["(",s,")();"],{type:"text/javascript"})))),l=new e.Worker(o);return l.onmessage=m,l.id=a++,n[l.id]=l}();return l.userStep=s.step,l.userChunk=s.chunk,l.userComplete=s.complete,l.userError=s.error,s.step=b(s.step),s.chunk=b(s.chunk),s.complete=b(s.complete),s.error=b(s.error),delete s.worker,void l.postMessage({input:i,config:s,workerId:l.id})}var p=null;return r.NODE_STREAM_INPUT,"string"==typeof i?p=s.download?new d(s):new c(s):!0===i.readable&&b(i.read)&&b(i.on)?p=new h(s):(e.File&&i instanceof File||i instanceof Object)&&(p=new u(s)),p.stream(i)},unparse:function(t,e){var i=!1,s=!0,n=",",a="\r\n",o='"',l=o+o,d=!1,u=null,c=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||r.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(n=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(d=e.skipEmptyLines),"string"==typeof e.newline&&(a=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(s=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");u=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+o),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(c=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var h=new RegExp(g(o),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return p(null,t,d);if("object"==typeof t[0])return p(u||Object.keys(t[0]),t,d)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||u),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),p(t.fields||[],t.data||[],d);throw new Error("Unable to serialize unrecognized input");function p(t,e,i){var r="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(o&&s){for(var d=0;d<t.length;d++)0<d&&(r+=n),r+=f(t[d],d);0<e.length&&(r+=a)}for(var u=0;u<e.length;u++){var c=o?t.length:e[u].length,h=!1,p=o?0===Object.keys(e[u]).length:0===e[u].length;if(i&&!o&&(h="greedy"===i?""===e[u].join("").trim():1===e[u].length&&0===e[u][0].length),"greedy"===i&&o){for(var g=[],m=0;m<c;m++){var v=l?t[m]:m;g.push(e[u][v])}h=""===g.join("").trim()}if(!h){for(var _=0;_<c;_++){0<_&&!p&&(r+=n);var y=o&&l?t[_]:_;r+=f(e[u][y],_)}u<e.length-1&&(!i||0<c&&!p)&&(r+=a)}}return r}function f(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var s=!1;c&&"string"==typeof t&&c.test(t)&&(t="'"+t,s=!0);var a=t.toString().replace(h,l);return(s=s||!0===i||"function"==typeof i&&i(t,e)||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(a,r.BAD_DELIMITERS)||-1<a.indexOf(n)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?o+a+o:a}}};if(r.RECORD_SEP=String.fromCharCode(30),r.UNIT_SEP=String.fromCharCode(31),r.BYTE_ORDER_MARK="\ufeff",r.BAD_DELIMITERS=["\r","\n",'"',r.BYTE_ORDER_MARK],r.WORKERS_SUPPORTED=!i&&!!e.Worker,r.NODE_STREAM_INPUT=1,r.LocalChunkSize=10485760,r.RemoteChunkSize=5242880,r.DefaultDelimiter=",",r.Parser=f,r.ParserHandle=p,r.NetworkStreamer=d,r.FileStreamer=u,r.StringStreamer=c,r.ReadableStreamStreamer=h,e.jQuery){var o=e.jQuery;o.fn.parse=function(t){var i=t.config||{},s=[];return this.each((function(t){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)s.push({file:this.files[n],inputElem:this,instanceConfig:o.extend({},i)})})),n(),this;function n(){if(0!==s.length){var e,i,n,l=s[0];if(b(t.before)){var d=t.before(l.file,l.inputElem);if("object"==typeof d){if("abort"===d.action)return e=l.file,i=l.inputElem,n=d.reason,void(b(t.error)&&t.error({name:"AbortError"},e,i,n));if("skip"===d.action)return void a();"object"==typeof d.config&&(l.instanceConfig=o.extend(l.instanceConfig,d.config))}else if("skip"===d)return void a()}var u=l.instanceConfig.complete;l.instanceConfig.complete=function(t){b(u)&&u(t,l.file,l.inputElem),a()},r.parse(l.file,l.instanceConfig)}else b(t.complete)&&t.complete()}function a(){s.splice(0,1),n()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=y(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,i){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(t);void 0!==n&&(t=n)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+t;this._partialLine="";var o=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=o.meta.cursor;this._finished||(this._partialLine=a.substring(l-this._baseIndex),this._baseIndex=l),o&&o.data&&(this._rowCount+=o.data.length);var d=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)e.postMessage({results:o,workerId:r.WORKER_ID,finished:d});else if(b(this._config.chunk)&&!i){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!d||!b(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){b(this._config.error)?this._config.error(t):s&&this._config.error&&e.postMessage({workerId:r.WORKER_ID,error:t,finished:!1})}}function d(t){var e;(t=t||{}).chunkSize||(t.chunkSize=r.RemoteChunkSize),l.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var s in t)e.setRequestHeader(s,t[s])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+n)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}i&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){var t;4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(t=e.getResponseHeader("Content-Range"))?-1:parseInt(t.substring(t.lastIndexOf("/")+1))),this.parseChunk(e.responseText)))},this._chunkError=function(t){var i=e.statusText||t;this._sendError(new Error(i))}}function u(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=r.LocalChunkSize),l.call(this,t);var s="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,s?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,n)}var a=e.readAsText(t,this._config.encoding);s||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function c(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,i=this._config.chunkSize;return i?(t=e.substring(0,i),e=e.substring(i)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function h(t){l.call(this,t=t||{});var e=[],i=!0,s=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=w((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=w((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=w((function(){this._streamCleanUp(),s=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(t){var e,i,s,n=Math.pow(2,53),a=-n,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,d=this,u=0,c=0,h=!1,p=!1,m=[],v={data:[],errors:[],meta:{}};if(b(t.step)){var _=t.step;t.step=function(e){if(v=e,T())x();else{if(x(),0===v.data.length)return;u+=e.data.length,t.preview&&u>t.preview?i.abort():(v.data=v.data[0],_(v,d))}}}function w(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function x(){return v&&s&&(O("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+r.DefaultDelimiter+"'"),s=!1),t.skipEmptyLines&&(v.data=v.data.filter((function(t){return!w(t)}))),T()&&function(){if(v)if(Array.isArray(v.data[0])){for(var e=0;T()&&e<v.data.length;e++)v.data[e].forEach(i);v.data.splice(0,1)}else v.data.forEach(i);function i(e,i){b(t.transformHeader)&&(e=t.transformHeader(e,i)),m.push(e)}}(),function(){if(!v||!t.header&&!t.dynamicTyping&&!t.transform)return v;function e(e,i){var s,n=t.header?{}:[];for(s=0;s<e.length;s++){var a=s,r=e[s];t.header&&(a=s>=m.length?"__parsed_extra":m[s]),t.transform&&(r=t.transform(r,a)),r=E(a,r),"__parsed_extra"===a?(n[a]=n[a]||[],n[a].push(r)):n[a]=r}return t.header&&(s>m.length?O("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+s,c+i):s<m.length&&O("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+s,c+i)),n}var i=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(e),i=v.data.length):v.data=e(v.data,0),t.header&&v.meta&&(v.meta.fields=m),c+=i,v}()}function T(){return t.header&&0===m.length}function E(e,i){var s;return s=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[s]&&(t.dynamicTyping[s]=t.dynamicTypingFunction(s)),!0===(t.dynamicTyping[s]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(function(t){if(o.test(t)){var e=parseFloat(t);if(a<e&&e<n)return!0}return!1}(i)?parseFloat(i):l.test(i)?new Date(i):""===i?null:i):i}function O(t,e,i,s){var n={type:t,code:e,message:i};void 0!==s&&(n.row=s),v.errors.push(n)}this.parse=function(n,a,o){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var i=new RegExp(g(e)+"([^]*?)"+g(e),"gm"),s=(t=t.replace(i,"")).split("\r"),n=t.split("\n"),a=1<n.length&&n[0].length<s[0].length;if(1===s.length||a)return"\n";for(var r=0,o=0;o<s.length;o++)"\n"===s[o][0]&&r++;return r>=s.length/2?"\r\n":"\r"}(n,l)),s=!1,t.delimiter)b(t.delimiter)&&(t.delimiter=t.delimiter(n),v.meta.delimiter=t.delimiter);else{var d=function(e,i,s,n,a){var o,l,d,u;a=a||[",","\t","|",";",r.RECORD_SEP,r.UNIT_SEP];for(var c=0;c<a.length;c++){var h=a[c],p=0,g=0,m=0;d=void 0;for(var v=new f({comments:n,delimiter:h,newline:i,preview:10}).parse(e),_=0;_<v.data.length;_++)if(s&&w(v.data[_]))m++;else{var y=v.data[_].length;g+=y,void 0!==d?0<y&&(p+=Math.abs(y-d),d=y):d=y}0<v.data.length&&(g/=v.data.length-m),(void 0===l||p<=l)&&(void 0===u||u<g)&&1.99<g&&(l=p,o=h,u=g)}return{successful:!!(t.delimiter=o),bestDelimiter:o}}(n,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);d.successful?t.delimiter=d.bestDelimiter:(s=!0,t.delimiter=r.DefaultDelimiter),v.meta.delimiter=t.delimiter}var u=y(t);return t.preview&&t.header&&u.preview++,e=n,i=new f(u),v=i.parse(e,a,o),x(),h?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,i.abort(),e=b(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){d.streamer._halted?(h=!1,d.streamer.parseChunk(e,!0)):setTimeout(d.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,i.abort(),v.meta.aborted=!0,b(t.complete)&&t.complete(v),e=""}}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(t){var e,i=(t=t||{}).delimiter,s=t.newline,n=t.comments,a=t.step,o=t.preview,l=t.fastMode,d=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(d=t.escapeChar),("string"!=typeof i||-1<r.BAD_DELIMITERS.indexOf(i))&&(i=","),n===i)throw new Error("Comment character same as delimiter");!0===n?n="#":("string"!=typeof n||-1<r.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==s&&"\r"!==s&&"\r\n"!==s&&(s="\n");var u=0,c=!1;this.parse=function(t,r,h){if("string"!=typeof t)throw new Error("Input must be a string");var p=t.length,f=i.length,m=s.length,v=n.length,_=b(a),y=[],w=[],x=[],T=u=0;if(!t)return j();if(l||!1!==l&&-1===t.indexOf(e)){for(var E=t.split(s),O=0;O<E.length;O++){if(x=E[O],u+=x.length,O!==E.length-1)u+=s.length;else if(h)return j();if(!n||x.substring(0,v)!==n){if(_){if(y=[],I(x.split(i)),P(),c)return j()}else I(x.split(i));if(o&&o<=O)return y=y.slice(0,o),j(!0)}}return j()}for(var k=t.indexOf(i,u),S=t.indexOf(s,u),C=new RegExp(g(d)+g(e),"g"),D=t.indexOf(e,u);;)if(t[u]!==e)if(n&&0===x.length&&t.substring(u,u+v)===n){if(-1===S)return j();u=S+m,S=t.indexOf(s,u),k=t.indexOf(i,u)}else if(-1!==k&&(k<S||-1===S))x.push(t.substring(u,k)),u=k+f,k=t.indexOf(i,u);else{if(-1===S)break;if(x.push(t.substring(u,S)),R(S+m),_&&(P(),c))return j();if(o&&y.length>=o)return j(!0)}else for(D=u,u++;;){if(-1===(D=t.indexOf(e,D+1)))return h||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:u}),L();if(D===p-1)return L(t.substring(u,D).replace(C,e));if(e!==d||t[D+1]!==d){if(e===d||0===D||t[D-1]!==d){-1!==k&&k<D+1&&(k=t.indexOf(i,D+1)),-1!==S&&S<D+1&&(S=t.indexOf(s,D+1));var M=N(-1===S?k:Math.min(k,S));if(t.substr(D+1+M,f)===i){x.push(t.substring(u,D).replace(C,e)),t[u=D+1+M+f]!==e&&(D=t.indexOf(e,u)),k=t.indexOf(i,u),S=t.indexOf(s,u);break}var A=N(S);if(t.substring(D+1+A,D+1+A+m)===s){if(x.push(t.substring(u,D).replace(C,e)),R(D+1+A+m),k=t.indexOf(i,u),D=t.indexOf(e,u),_&&(P(),c))return j();if(o&&y.length>=o)return j(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:u}),D++}}else D++}return L();function I(t){y.push(t),T=u}function N(e){var i=0;if(-1!==e){var s=t.substring(D+1,e);s&&""===s.trim()&&(i=s.length)}return i}function L(e){return h||(void 0===e&&(e=t.substring(u)),x.push(e),u=p,I(x),_&&P()),j()}function R(e){u=e,I(x),x=[],S=t.indexOf(s,u)}function j(t){return{data:y,errors:w,meta:{delimiter:i,linebreak:s,aborted:c,truncated:!!t,cursor:T+(r||0)}}}function P(){a(j()),y=[],w=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function m(t){var e=t.data,i=n[e.workerId],s=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var a={abort:function(){s=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(b(i.userStep)){for(var r=0;r<e.results.data.length&&(i.userStep({data:e.results.data[r],errors:e.results.errors,meta:e.results.meta},a),!s);r++);delete e.results}else b(i.userChunk)&&(i.userChunk(e.results,a,e.file),delete e.results)}e.finished&&!s&&v(e.workerId,e.results)}function v(t,e){var i=n[t];b(i.userComplete)&&i.userComplete(e),i.terminate(),delete n[t]}function _(){throw new Error("Not implemented.")}function y(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=y(t[i]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function b(t){return"function"==typeof t}return s&&(e.onmessage=function(t){var i=t.data;if(void 0===r.WORKER_ID&&i&&(r.WORKER_ID=i.workerId),"string"==typeof i.input)e.postMessage({workerId:r.WORKER_ID,results:r.parse(i.input,i.config),finished:!0});else if(e.File&&i.input instanceof File||i.input instanceof Object){var s=r.parse(i.input,i.config);s&&e.postMessage({workerId:r.WORKER_ID,results:s,finished:!0})}}),(d.prototype=Object.create(l.prototype)).constructor=d,(u.prototype=Object.create(l.prototype)).constructor=u,(c.prototype=Object.create(c.prototype)).constructor=c,(h.prototype=Object.create(l.prototype)).constructor=h,r},"function"==typeof define&&define.amd?define([],Ei):Oi=Ei();let ki=new(t(Ti))(document.getElementById("tags"));document.getElementById("tags").addEventListener("change",(t=>{let e=JSON.parse(t.target.value?t.target.value:"[]");e.length>0&&(e=e.map((t=>t.value)));let i=new CustomEvent("tagchange",{detail:e});document.dispatchEvent(i)})),window.addEventListener("keydown",(t=>{"Escape"==t.key&&ki.removeAllTags()})),xi.data("storyData",(()=>({stories:[],allStories:[],handleTagChange(t){let e=t.detail;0==e.length?this.stories=this.allStories:this.stories=this.allStories.filter((t=>e.every((e=>t.Tags.includes(e)))))},addTag(t){console.log("adding tag: "+t),ki.addTags([t]),console.log("tag input is: "+this.taginput)},init:async function(){let e=await new Promise((e=>{t(Oi).parse("stories.csv",{download:!0,header:!0,complete:function(t){let i=t.data;i=i.filter((t=>t.Title.length>0)).map((t=>({...t,Tags:t.Tags.split(",").map((t=>t.trim()))}))),e(i)}})}));console.log(e),this.allStories=e,this.stories=e,ki.whitelist=[...new Set(e.flatMap((t=>t.Tags)).sort())]}}))),xi.start()}();</script>

        
    </body>
</html>